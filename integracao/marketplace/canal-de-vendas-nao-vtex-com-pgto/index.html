<!DOCTYPE HTML>
<html lang="en" >
    <!-- Start book VTEX Lab Docs -->
    <head>
        <!-- head:start -->
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=11; IE=10; IE=9; IE=8; IE=7; IE=EDGE" />
        <title>Marketplace não VTEX c/ pagto | VTEX Lab Docs</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.0.1">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../../../gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    <link rel="next" href="../../../integracao/marketplace/seller-não-vtex/index.html" />
    
    
    <link rel="prev" href="../../../integracao/marketplace/canal-de-vendas-nao-vtex/index.html" />
    

        <!-- head:end -->
    </head>
    <body>
        <!-- body:start -->
        
    <link rel="stylesheet" href="../../../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../../../gitbook/plugins/gitbook-plugin-anchors/plugin.css">
        
    
        
        <link rel="stylesheet" href="../../../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.css">
        
    
    
        <link rel="stylesheet" href="../../../styles/website.css">
    

        
    <div class="book" data-level="1.2.2" data-basepath="../../.." data-revision="Fri Jul 31 2015 17:11:53 GMT-0300 (E. South America Standard Time)">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        

        

        
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../../../index.html">
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="integracao/index.html">
            
                
                    <a href="../../../integracao/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Integração
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="integracao/erp/index.html">
            
                
                    <a href="../../../integracao/erp/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        ERP
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="integracao/erp/catalogo-completo/index.html">
            
                
                    <a href="../../../integracao/erp/catalogo-completo/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.1.</b>
                        
                        Catálogo Completo
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.1.2" data-path="integracao/erp/catalogo-expresso/index.html">
            
                
                    <a href="../../../integracao/erp/catalogo-expresso/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.2.</b>
                        
                        Catálogo Expresso
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.1.3" data-path="integracao/erp/listas/index.html">
            
                
                    <a href="../../../integracao/erp/listas/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.3.</b>
                        
                        Listas
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.1.4" data-path="integracao/erp/pedido-e-tracking/index.html">
            
                
                    <a href="../../../integracao/erp/pedido-e-tracking/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.4.</b>
                        
                        Pedido e Tracking
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="integracao/marketplace/index.html">
            
                
                    <a href="../../../integracao/marketplace/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Marketplace
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="integracao/marketplace/canal-de-vendas-nao-vtex/index.html">
            
                
                    <a href="../../../integracao/marketplace/canal-de-vendas-nao-vtex/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.1.</b>
                        
                        Marketplace não VTEX
                    </a>
                
            
            
        </li>
    
        <li class="chapter active" data-level="1.2.2" data-path="integracao/marketplace/canal-de-vendas-nao-vtex-com-pgto/index.html">
            
                
                    <a href="../../../integracao/marketplace/canal-de-vendas-nao-vtex-com-pgto/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.2.</b>
                        
                        Marketplace não VTEX c/ pagto
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="integracao/marketplace/seller-não-vtex/index.html">
            
                
                    <a href="../../../integracao/marketplace/seller-não-vtex/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.3.</b>
                        
                        Seller não VTEX
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="integracao/marketplace/seller-não-vtex-com-pgto/index.html">
            
                
                    <a href="../../../integracao/marketplace/seller-não-vtex-com-pgto/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.4.</b>
                        
                        Seller não VTEX c/ pagto
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="plugins/lib/latest/expiration/index.html">
            
                
                    <a href="../../../plugins/lib/latest/expiration/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Plugins
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="search/api/beta/search/index.html">
            
                
                    <a href="../../../search/api/beta/search/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Search
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="vtex.js/latest/index.html">
            
                
                    <a href="../../../vtex.js/latest/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        vtex.js
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="vtex.js/latest/checkout/index.html">
            
                
                    <a href="../../../vtex.js/latest/checkout/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Checkout
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="vtex.js/latest/checkout/order-form.html">
            
                
                    <a href="../../../vtex.js/latest/checkout/order-form.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.1.</b>
                        
                        OrderForm
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="vtex.js/latest/catalog/index.html">
            
                
                    <a href="../../../vtex.js/latest/catalog/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Catálogo
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                Published with GitBook
            </a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Table of Contents"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Font Settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Share"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">
                    Share on Twitter
                </button>
                <button type="button" data-sharing="google-plus" class="button">
                    Share on Google
                </button>
                <button type="button" data-sharing="facebook" class="button">
                    Share on Facebook
                </button>
                <button type="button" data-sharing="weibo" class="button">
                    Share on Weibo
                </button>
                <button type="button" data-sharing="instapaper" class="button">
                    Share on Instapaper
                </button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Google"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../../" >VTEX Lab Docs</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h2 id="marketplace-n%C3%A3o-hospedado-na-plataforma-vtex-vendendo-para-sellers-hospedados-na-plataforma-vtex-com-pagamento"><a name="marketplace-n%C3%A3o-hospedado-na-plataforma-vtex-vendendo-para-sellers-hospedados-na-plataforma-vtex-com-pagamento" class="plugin-anchor" href="#marketplace-n%C3%A3o-hospedado-na-plataforma-vtex-vendendo-para-sellers-hospedados-na-plataforma-vtex-com-pagamento"><span class="fa fa-link"></span></a>Marketplace N&#xE3;o Hospedado na Plataforma VTEX vendendo para Sellers Hospedados na Plataforma VTEX com Pagamento</h2>
<p>Este documento tem por finalidade auxiliar na integra&#xE7;&#xE3;o de um <em>Marketplace</em> <strong>n&#xE3;o</strong> hospedado na plataforma VTEX com um <em>Seller</em> hospedado na plataforma VTEX. <br>
Este modelo contempla troca de catalogo, atualiza&#xE7;&#xE3;o de condi&#xE7;&#xE3;o comercial (pre&#xE7;o, estoque) de um <em>SKU</em> entre um Seller hospedado na plataforma VTEX e um Marketplace (afiliado) <strong>n&#xE3;o</strong> hospedado na plataforma VTEX, al&#xE9;m de auxiliar na descida de pedido, transa&#xE7;&#xE3;o de pagamento e envio de autoriza&#xE7;&#xE3;o de despacho para o Seller hospedado na plataforma VTEX.</p>
<blockquote>
<p>ALGUNS CONCEITOS:</p>
<blockquote>
<p><em>Seller</em> = Dono do produto, respons&#xE1;vel por cumprir com a entrega do SKU.<br>
<em>Marketplace</em> = Dono da vitrine (cara com o cliente final), respons&#xE1;vel por expor e vender o SKU.<br>
<em>SKU</em> = Item a ser trocado e vendido entre Marketplace e Seller.<br>
<em>Endpoint</em> = Ponto de acesso de um servi&#xE7;o ma internet, servi&#xE7;o pronto para receber uma requisi&#xE7;&#xE3;o e devolver uma resposta.<br></p>
</blockquote>
</blockquote>
<h4 id="a%C3%A7%C3%B5es-que-dever%C3%A3o-ser-tomadas-pelo-marketplace-n%C3%A3o-hospedado-na-vtex-para-implementa%C3%A7%C3%A3o-da-integra%C3%A7%C3%A3o"><a name="a%C3%A7%C3%B5es-que-dever%C3%A3o-ser-tomadas-pelo-marketplace-n%C3%A3o-hospedado-na-vtex-para-implementa%C3%A7%C3%A3o-da-integra%C3%A7%C3%A3o" class="plugin-anchor" href="#a%C3%A7%C3%B5es-que-dever%C3%A3o-ser-tomadas-pelo-marketplace-n%C3%A3o-hospedado-na-vtex-para-implementa%C3%A7%C3%A3o-da-integra%C3%A7%C3%A3o"><span class="fa fa-link"></span></a>A&#xE7;&#xF5;es que dever&#xE3;o ser tomadas pelo Marketplace n&#xE3;o hospedado na VTEX para implementa&#xE7;&#xE3;o da integra&#xE7;&#xE3;o:</h4>
<ol>
<li><p>Implementar o endpoint para receber notifica&#xE7;&#xE3;o de mudan&#xE7;a de pre&#xE7;o e estoque - Seller hospedado na VTEX vai chamar endpoint do Marketplace. Toda vez que o SKU mudar o pre&#xE7;o e ou o estoque no Seller, o Seller tem que chamar esse endpoint do Marketplace, simplesmente comunicando a mudan&#xE7;a. Ao receber esse request o Marketplace vem buscar o pre&#xE7;o e estoque no Seller no metodo de consulta politica comercial que vamos falar mais abaixo.</p>
<p><em>exemplo da chamada:</em><br>
<code>https://marketplace.com.br/api/notification/</code></p>
<p><a href="#a1">Exemplo Completo: Enviar Notifica&#xE7;&#xE3;o de Mudan&#xE7;a de Pre&#xE7;o e Estoque de SKU</a></p>
</li>
<li><p>Implementar busca de dados de SKU no Seller - Marketplace vai chamar endpoint do Seller na VTEX. Toda vez que o servi&#xE7;o de notifica&#xE7;&#xE3;o de mudan&#xE7;a do Seller avisar sobre uma SKU, e o Marketplace ainda n&#xE3;o tem a SKU catalogada, o Marketplace vem no Seller buscar os dados da nova SKU.</p>
<p><em>exemplo da chamada:</em><br>
<code>http://sandboxintegracao.vtexcommercestable.com.br/api/catalog_system/pvt/sku/stockkeepingunitbyid/2000037</code></p>
<p><a href="#a2">Exemplo Completo: Buscar Dados de SKU</a></p>
</li>
<li><p>Implementar busca de politica comercial (pre&#xE7;o e estoque, frete, tipo entrega e custo) - Marketplace vai chamar endpoint do Seller. Toda vez que o servi&#xE7;o de notifica&#xE7;&#xE3;o de mudan&#xE7;a do Seller avisar sobre mudan&#xE7;a de uma SKU (j&#xE1; catalogada), o Marketplace busca pre&#xE7;o e ou estoque no Seller pra se atualizar.</p>
<p><em>exemplo da chamada:</em><br>
<code>https://sandboxintegracao.vtexcommercestable.com.br/api/fulfillment/pvt/orderForms/simulation?sc=1&amp;affiliateId=LAB</code></p>
<p><a href="#a3">Exemplo Completo: Consultar Pol&#xED;tica Comercial</a></p>
</li>
<li><p>Implementar busca de formas de pagamento do Seller - Marketplace vai chamar endpoint do Seller. O Marketplace ir&#xE1; usar esse endpoint para consultar as formas de pagamento oferecidas pelo Seller.</p>
<p><em>exemplo da chamada:</em><br>
<code>https://sandboxintegracao.vtexpayments.com.br/api/pvt/merchants/payment-systems</code></p>
<p><a href="#a5">Exemplo Completo: Consultar Formas de Pagamento no Seller</a></p>
</li>
<li><p>Implementar busca de parcelamento - Marketplace vai chamar endpoint do Seller. O Marketplace ir&#xE1; usar esse endpoint para consultar os parcelamentos oferecidos pelo Seller.</p>
<p><em>exemplo da chamada:</em><br>
<code>https://sandboxintegracao.vtexpayments.com.br/api/pvt/installments/options</code></p>
<p><a href="#a6">Exemplo Completo: Consultar Formas de Parcelamento no Seller</a></p>
</li>
<li><p>Implementar rotina que coloca um pedido no Seller - Marketplace vai chamar endpoint do Seller. O Marketplace ir&#xE1; usar esse endpoint para colocar um pedido no Seller.</p>
<p><em>exemplo da chamada:</em><br>
<code>https://sandboxintegracao.vtexcommercestable.com.br/api/fulfillment/pvt/orders?sc=1&amp;affiliateId=LAB</code></p>
<p><a href="#a7">Exemplo Completo: Colocar um Pedido no Seller</a></p>
</li>
<li><p>Implementar rotina que abre transa&#xE7;&#xE3;o de pagamento no Seller - Marketplace vai chamar endpoint do Seller.
O Marketplace ir&#xE1; usar esse endpoint para abrir uma transa&#xE7;&#xE3;o pagamento para o Seller.</p>
<p><em>exemplo da chamada:</em><br>
<code>https://sandboxintegracao.vtexpayments.com.br/api/pvt/transactions</code></p>
<p><a href="#a8">Exemplo Completo: Abrir uma Trasa&#xE7;&#xE3;o de Pagamento no Seller</a></p>
</li>
<li><p>Implementar rotina que coloca pagamento no Seller - Marketplace vai chamar endpoint do Seller.
O Marketplace ir&#xE1; usar esse endpoint para colocar um pagamento no Seller.</p>
<p><em>exemplo da chamada:</em><br>
<code>https://sandboxintegracao.vtexpayments.com.br/api/pvt/payments</code></p>
<p><a href="#a9">Exemplo Completo: Colocar um Pagamento no Seller</a></p>
</li>
<li><p>Implementar rotina que coloca dados adicionais de pagamento no Seller - Marketplace vai chamar endpoint do Seller.
O Marketplace ir&#xE1; usar esse endpoint para colocar informa&#xE7;&#xF5;es adicionais de dados do pagamento  no Seller</p>
<p><em>exemplo da chamada:</em><br>
<code>https://sandboxintegracao.vtexpayments.com.br/api/pvt/transactions/[transactionid]/additional-data</code></p>
<p><a href="#a10">Exemplo Completo: Colocar Dados Adicionais de Pagamento no Seller</a></p>
</li>
<li><p>Implementar rotina que autoriza o pagamento no Seller - Marketplace vai chamar endpoint do Seller.
O Marketplace ir&#xE1; usar esse endpoint para autorizar o andamento do pagamento no Seller</p>
<p><em>exemplo da chamada:</em><br>
<code>https://sandboxintegracao.vtexpayments.com.br/api/pvt/transactions/[transactionid]/authorization-request</code></p>
<p><a href="#a11">Exemplo Completo: Autorizar o Andamento do Pagamento no Seller</a></p>
</li>
<li><p>Implementar endpoint de receber nota fiscal e rastreamento de entrega de um pedido - Seller vai chamar endpoint do Marketplace.Nos dados do pedido &#xE9; enviado uma endpoint de servi&#xE7;os do Marketplace, o Seller vai invocar esse endpoint tanto pra informar dados de nota fiscal quanto dados de rastreamento de transportadora. O Seller ainda pode solicitar um cancelamento de um pedido que ainda n&#xE3;o enviou nota fiscal.</p>
<p><em>exemplo da chamada:</em><br>
<code>https://marketplaceServicesEndpoint/pub/orders/[marketplaceorderId]/invoice</code><br>
<code>https://marketplaceServicesEndpoint/pub/orders/[marketplaceorderId]/cancel</code><br></p>
<p><a href="#a12">Exemplo Completo: Informar nota fiscal de um pedido</a><br>
<a href="#a13">Exemplo Completo: Informar tracking de um pedido</a><br>
<a href="#a14">Exemplo Completo: Solicitar cancelamento de um pedido sem nota fiscal</a><br></p>
<blockquote>
<p>NOTA</p>
<blockquote>
<p>No POST do pedido feito pelo Marketplace, o campo &quot;marketplaceserviceendpoint&quot; deve vir preenchido com o url base de servi&#xE7;os do Marketplace.</p>
</blockquote>
</blockquote>
</li>
<li><p>Implementar rotina que captura ou cancela o pagamento no Seller - Marketplace vai chamar endpoint do Seller.
O Marketplace deve capturar o pagamento ao receber a nota fiscal e deve cancelar o pagamento ao receber um cancelamento de pedido.</p>
<p><em>exemplo da chamada de captura:</em><br>
<code>https://sandboxintegracao.vtexpayments.com.br/api/pvt/transactions/[transactionId]/settlement-request</code></p>
</li>
</ol>
<p><em>exemplo da chamada de cancelamento:</em><br>
<code>https://sandboxintegracao.vtexpayments.com.br/api/pvt/transactions/[transactionId]/cancellation-request</code></p>
<blockquote>
<p>O exemplo completo esta descrito dentro da rotina de informar nota fiscal e cancelar, citada acima.</p>
</blockquote>
<hr>
<h2 id="abaixo-segue-o-passo-a-passo-detalhado-de-cada-fluxo"><a name="abaixo-segue-o-passo-a-passo-detalhado-de-cada-fluxo" class="plugin-anchor" href="#abaixo-segue-o-passo-a-passo-detalhado-de-cada-fluxo"><span class="fa fa-link"></span></a>Abaixo segue o passo a passo detalhado de cada fluxo:</h2>
<h3 id="troca-de-catalogo-de-sku-e-atualiza%C3%A7%C3%A3o-de-condi%C3%A7%C3%A3o-comercial-de-sku"><a name="troca-de-catalogo-de-sku-e-atualiza%C3%A7%C3%A3o-de-condi%C3%A7%C3%A3o-comercial-de-sku" class="plugin-anchor" href="#troca-de-catalogo-de-sku-e-atualiza%C3%A7%C3%A3o-de-condi%C3%A7%C3%A3o-comercial-de-sku"><span class="fa fa-link"></span></a>Troca de Catalogo de SKU e Atualiza&#xE7;&#xE3;o de Condi&#xE7;&#xE3;o Comercial de SKU</h3>
<p>Fluxo de troca de catalogo de SKU e atualiza&#xE7;&#xE3;o de pre&#xE7;o, estoque, frete, SLAs de entrega:</p>
<p><img src="sku-sugestion-canal-nao-vtex.png" alt="alt text" title="Title"></p>
<h3 id="inser%C3%A7%C3%A3o-e-atualiza%C3%A7%C3%A3o-de-sku-fluxo"><a name="inser%C3%A7%C3%A3o-e-atualiza%C3%A7%C3%A3o-de-sku-fluxo" class="plugin-anchor" href="#inser%C3%A7%C3%A3o-e-atualiza%C3%A7%C3%A3o-de-sku-fluxo"><span class="fa fa-link"></span></a>Inser&#xE7;&#xE3;o e Atualiza&#xE7;&#xE3;o de SKU - Fluxo</h3>
<ul>
<li><p>Dentro da loja hospedada na VTEX, ser&#xE1; criado um *afiliado, que &#xE9; o interessado em receber o cat&#xE1;logo e as atualiza&#xE7;&#xF5;es de condi&#xE7;&#xF5;es comerciais.</p>
</li>
<li><p>O afiliado, dever&#xE1; implementar um endpoint onde receber&#xE1; informa&#xE7;&#xF5;es sobre altera&#xE7;&#xF5;es de condi&#xE7;&#xE3;o comercial de SKUs.</p>
</li>
<li><p>Na loja VTEX, cada vez que uma SKU comercializado pelo afiliado sofrer uma altera&#xE7;&#xE3;o na condi&#xE7;&#xE3;o comercial, ou for reindexado, o endpoint de notifica&#xE7;&#xE3;o do afiliado ser&#xE1; chamado.</p>
</li>
<li><p>Quando o afiliado recebe uma notifica&#xE7;&#xE3;o que um SKU mudou a condi&#xE7;&#xE3;o comercial, o afiliado deve checar se j&#xE1; comercializa aquela SKU daquela loja que comunicou.</p>
<ul>
<li><p><strong>Caso SIM</strong>: O afiliado consulta a condi&#xE7;&#xE3;o comercial na VTEX e se atualiza.</p>
</li>
<li><p><strong>Caso N&#xC3;O</strong>: O afiliado busca a SKU na loja, insere no seu catalogo, e depois repete o cen&#xE1;rio do &quot;Caso SIM&quot;.</p>
</li>
</ul>
</li>
</ul>
<p><a name="a1"></a></p>
<h3 id="notifica%C3%A7%C3%A3o-de-mudan%C3%A7a"><a name="notifica%C3%A7%C3%A3o-de-mudan%C3%A7a" class="plugin-anchor" href="#notifica%C3%A7%C3%A3o-de-mudan%C3%A7a"><span class="fa fa-link"></span></a>Notifica&#xE7;&#xE3;o de Mudan&#xE7;a</h3>
<p>Notifica o Marketplace N&#xE3;o VTEX que houve uma mudan&#xE7;a nas condi&#xE7;&#xF5;es comerciais (pre&#xE7;o, estoque, SLAs de entrega) de uma SKU - Endpoint do Afiliado (Marketplace)</p>
<p>endpoint: <code>https://[endpointdoafiliado}/api/notification/</code><br>
verb: <strong>POST</strong><br>
Content-Type: <strong>application/json</strong><br>
Accept: <strong>application/json</strong><br></p>
<p><em>request:</em></p>
<pre><code class="lang-json">{
    <span class="hljs-string">&quot;IdSku&quot;</span> : <span class="hljs-string">&quot;1634&quot;</span>, <span class="hljs-comment">//id da sku da VTEX</span>
    <span class="hljs-string">&quot;An&quot;</span> : <span class="hljs-string">&quot;sandboxintegracao&quot;</span>, <span class="hljs-comment">//loja vtex</span>
    <span class="hljs-string">&quot;IdAffiliate&quot;</span>:<span class="hljs-string">&quot;PRT&quot;</span>, <span class="hljs-comment">// id do afilado cadastrado na loja vtex</span>
    <span class="hljs-string">&quot;StockModified&quot;</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">//mudou estoque?</span>
    <span class="hljs-string">&quot;PriceModified&quot;</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">//mudou pre&#xE7;o?</span>
}
</code></pre>
<p><a name="a3"></a></p>
<h3 id="busca-de-condi%C3%A7%C3%B5es-comerciais"><a name="busca-de-condi%C3%A7%C3%B5es-comerciais" class="plugin-anchor" href="#busca-de-condi%C3%A7%C3%B5es-comerciais"><span class="fa fa-link"></span></a>Busca de Condi&#xE7;&#xF5;es Comerciais</h3>
<p>Acessa a loja VTEX pegando as condi&#xE7;&#xF5;es comerciais (pre&#xE7;o, estoque, SLAs de entrega) de uma SKU  - Endpoint da Loja VTEX</p>
<p>endpoint: <code>https://[loja].vtexcommercestable.com.br/api/fulfillment/pvt/orderForms/simulation?sc=[idcanal]&amp;affiliateId=[idafiliado]</code>
verb: <strong>POST</strong><br>
Content-Type: <strong>application/json</strong><br>
Accept: <strong>application/json</strong><br>
Parametro: <strong>sc</strong> // sc &#xE9; o canal de vendas cadastrado no marketplace<br>
Parametro: <strong>affiliateId</strong> // o id do afiliado cadastrado na loja VTEX<br></p>
<p><em>request:</em></p>
<pre><code class="lang-json">{
    <span class="hljs-string">&quot;postalCode&quot;</span>:<span class="hljs-string">&quot;22251-030&quot;</span>,            <span class="hljs-comment">//obrigat&#xF3;rio se country estiver preenchido</span>
    <span class="hljs-string">&quot;country&quot;</span>:<span class="hljs-string">&quot;BRA&quot;</span>,                     <span class="hljs-comment">//obrigat&#xF3;rio se postalCode estiver preenchido</span>
    <span class="hljs-string">&quot;items&quot;</span>: [                           <span class="hljs-comment">//obrigat&#xF3;rio: deve conter pelo menos um objeto item</span>
        {
            <span class="hljs-string">&quot;id&quot;</span>:<span class="hljs-string">&quot;287611&quot;</span>,               <span class="hljs-comment">//obrigat&#xF3;rio, string</span>
            <span class="hljs-string">&quot;quantity&quot;</span>:<span class="hljs-number">1</span>,                <span class="hljs-comment">//obrigat&#xF3;rio-quantidade do item a ser simulada, int</span>
            <span class="hljs-string">&quot;seller&quot;</span>:<span class="hljs-string">&quot;1&quot;</span>                 <span class="hljs-comment">//loja pricipal usar sempre 1</span>
        },
        {
            <span class="hljs-string">&quot;id&quot;</span>:<span class="hljs-string">&quot;5837&quot;</span>,
            <span class="hljs-string">&quot;quantity&quot;</span>:<span class="hljs-number">5</span>,
            <span class="hljs-string">&quot;seller&quot;</span>:<span class="hljs-string">&quot;1&quot;</span>
        }
    ]
}
</code></pre>
<p><em>response:</em></p>
<pre><code class="lang-json">{
    <span class="hljs-string">&quot;items&quot;</span>: [                                                     <span class="hljs-comment">//pode vir um array vazio, caso item indisponivel</span>
        {
            <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;287611&quot;</span>,                                        <span class="hljs-comment">//obrigat&#xF3;rio, string</span>
            <span class="hljs-string">&quot;requestIndex&quot;</span>: <span class="hljs-number">0</span>,                                     <span class="hljs-comment">//obrigat&#xF3;rio, int - representa a posi&#xE7;&#xE3;o desse item no array original (request)</span>
            <span class="hljs-string">&quot;price&quot;</span>: <span class="hljs-number">7390</span>,                                         <span class="hljs-comment">//Os dois d&#xED;gitos menos significativos s&#xE3;o os centavos //obrigat&#xF3;rio, int</span>
            <span class="hljs-string">&quot;listPrice&quot;</span>: <span class="hljs-number">7490</span>,                                     <span class="hljs-comment">//Os dois d&#xED;gitos menos significativos s&#xE3;o os centavos //obrigat&#xF3;rio, int</span>
            <span class="hljs-string">&quot;quantity&quot;</span>: <span class="hljs-number">1</span>,                                         <span class="hljs-comment">//obrigat&#xF3;rio, int</span>
            <span class="hljs-string">&quot;seller&quot;</span>: <span class="hljs-string">&quot;1&quot;</span>,                                         <span class="hljs-comment">//id do seller cadastrado na loja // obrigat&#xF3;rio, string,</span>
            <span class="hljs-string">&quot;merchantName&quot;</span>: <span class="hljs-string">&quot;sandboxintegracao&quot;</span>,                   <span class="hljs-comment">//se retornado significa que o pagamento dever&#xE1; ser enviado, esse campo dever&#xE1; ser enviado junto com o pedido tamb&#xE9;m</span>
            <span class="hljs-string">&quot;priceValidUntil&quot;</span>: <span class="hljs-string">&quot;2014-03-01T22:58:28.143&quot;</span>           <span class="hljs-comment">//data, pode ser nulo</span>
            <span class="hljs-string">&quot;offerings&quot;</span>:[                                           <span class="hljs-comment">//Array opcional, por&#xE9;m n&#xE3;o pode ser nulo: enviar array vazio ou n&#xE3;o enviar a propriedade</span>
                {
                    <span class="hljs-string">&quot;type&quot;</span>:<span class="hljs-string">&quot;Garantia&quot;</span>,                               <span class="hljs-comment">//obrigat&#xF3;rio, string</span>
                    <span class="hljs-string">&quot;id&quot;</span>:<span class="hljs-string">&quot;5&quot;</span>,                                       <span class="hljs-comment">//obrigat&#xF3;rio, string</span>
                    <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;Garantia de 1 ano&quot;</span>,                       <span class="hljs-comment">//obrigat&#xF3;rio, string</span>
                    <span class="hljs-string">&quot;price&quot;</span>:<span class="hljs-number">10000</span>                                   <span class="hljs-comment">//Os dois d&#xED;gitos menos significativos s&#xE3;o os centavos //obrigat&#xF3;rio, int</span>
                },
                {
                    <span class="hljs-string">&quot;type&quot;</span>:<span class="hljs-string">&quot;Embalagem de Presente&quot;</span>,
                    <span class="hljs-string">&quot;id&quot;</span>:<span class="hljs-string">&quot;6&quot;</span>,
                    <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;Embalagem de Presente&quot;</span>,
                    <span class="hljs-string">&quot;price&quot;</span>:<span class="hljs-number">250</span>
                }
            ]
        },
        {
            <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;5837&quot;</span>,
            <span class="hljs-string">&quot;requestIndex&quot;</span>: <span class="hljs-number">1</span>,
            <span class="hljs-string">&quot;price&quot;</span>: <span class="hljs-number">890</span>,                                          <span class="hljs-comment">// Os dois d&#xED;gitos menos significativos s&#xE3;o os centavos</span>
            <span class="hljs-string">&quot;listPrice&quot;</span>: <span class="hljs-number">990</span>,                                      <span class="hljs-comment">// Os dois d&#xED;gitos menos significativos s&#xE3;o os centavos</span>
            <span class="hljs-string">&quot;quantity&quot;</span>: <span class="hljs-number">5</span>,
            <span class="hljs-string">&quot;seller&quot;</span>: <span class="hljs-string">&quot;1&quot;</span>,
            <span class="hljs-string">&quot;merchantName&quot;</span>: <span class="hljs-string">&quot;sandboxintegracao&quot;</span>,
            <span class="hljs-string">&quot;priceValidUntil&quot;</span>: <span class="hljs-literal">null</span>
        }
    ],
    <span class="hljs-string">&quot;logisticsInfo&quot;</span>: [                                            <span class="hljs-comment">//obrigat&#xF3;rio (se vier vazio &#xE9; considerado que o item n&#xE3;o est&#xE1; dispon&#xED;vel) -  todos os itens devem ter os mesmos SLAs</span>
        {
            <span class="hljs-string">&quot;itemIndex&quot;</span>: <span class="hljs-number">0</span>,                                       <span class="hljs-comment">//obrigat&#xF3;rio, int - representa os dados de sla do item de resposta (response)</span>
            <span class="hljs-string">&quot;stockBalance&quot;</span>: <span class="hljs-number">99</span>,                                   <span class="hljs-comment">//obrigat&#xF3;rio  quando o CEP foi passado no request, estoque, int</span>
            <span class="hljs-string">&quot;quantity&quot;</span>: <span class="hljs-number">1</span>,                                        <span class="hljs-comment">//obrigat&#xF3;rio quando o CEP foi passado no request, qauntidade pasada no request, int</span>
            <span class="hljs-string">&quot;shipsTo&quot;</span>: [ <span class="hljs-string">&quot;BRA&quot;</span>, <span class="hljs-string">&quot;USA&quot;</span> ],                          <span class="hljs-comment">//obrigat&#xF3;rio, array de string com as siglas dos pa&#xED;ses de entrega</span>
            <span class="hljs-string">&quot;slas&quot;</span>: [                                             <span class="hljs-comment">//obrigat&#xF3;rio quando o CEP foi passado no request. Pode ser um array vazio na ausencia do CEP</span>
                {
                    <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;Expressa&quot;</span>,                             <span class="hljs-comment">//obrigat&#xF3;rio, id tipo entrega, string</span>
                    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Entrega Expressa&quot;</span>,                   <span class="hljs-comment">//obrigat&#xF3;rio, nome do tipo entrega, string</span>
                    <span class="hljs-string">&quot;shippingEstimate&quot;</span>: <span class="hljs-string">&quot;2bd&quot;</span>,                    <span class="hljs-comment">// bd == &quot;business days&quot; //obrigat&#xF3;rio, string</span>
                    <span class="hljs-string">&quot;price&quot;</span>: <span class="hljs-number">1000</span>                                 <span class="hljs-comment">// Os dois d&#xED;gitos menos significativos s&#xE3;o os centavos, obrigat&#xF3;rio, int</span>
                    <span class="hljs-string">&quot;availableDeliveryWindows&quot;</span>: [                 <span class="hljs-comment">//opcional, podendo ser um array vazio</span>
                    ]
                },
                {
                    <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;Agendada&quot;</span>,
                    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Entrega Agendada&quot;</span>,
                    <span class="hljs-string">&quot;shippingEstimate&quot;</span>: <span class="hljs-string">&quot;5d&quot;</span>,                     <span class="hljs-comment">// d == &quot;days, bd == &quot;business days&quot;</span>
                    <span class="hljs-string">&quot;price&quot;</span>: <span class="hljs-number">800</span>,
                    <span class="hljs-string">&quot;availableDeliveryWindows&quot;</span>: [
                         {
                            <span class="hljs-string">&quot;startDateUtc&quot;</span>: <span class="hljs-string">&quot;2013-02-04T08:00:00+00:00&quot;</span>,       <span class="hljs-comment">//date, obrigat&#xF3;rio se for enviado delivery window</span>
                            <span class="hljs-string">&quot;endDateUtc&quot;</span>: <span class="hljs-string">&quot;2013-02-04T13:00:00+00:00&quot;</span>,         <span class="hljs-comment">//date, obrigat&#xF3;rio se for enviado delivery window</span>
                            <span class="hljs-string">&quot;price&quot;</span>: <span class="hljs-number">0</span>        <span class="hljs-comment">//int, obrigat&#xF3;rio se for enviado delivery window - o valor total da entrega agendada &#xE9; o valor base mais o valor desse campo</span>
                        },
                    ]
                }
            ]
        },
        {
            <span class="hljs-string">&quot;itemIndex&quot;</span>: <span class="hljs-number">1</span>,
            <span class="hljs-string">&quot;stockBalance&quot;</span>: <span class="hljs-number">1237</span>,
            <span class="hljs-string">&quot;quantity&quot;</span>: <span class="hljs-number">5</span>,
            <span class="hljs-string">&quot;shipsTo&quot;</span>: [ <span class="hljs-string">&quot;BRA&quot;</span> ],
            <span class="hljs-string">&quot;slas&quot;</span>: [
                {
                    <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;Normal&quot;</span>,
                    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Entrega Normal&quot;</span>,
                    <span class="hljs-string">&quot;shippingEstimate&quot;</span>: <span class="hljs-string">&quot;5bd&quot;</span>,                                  <span class="hljs-comment">// bd == &quot;business days&quot;</span>
                    <span class="hljs-string">&quot;price&quot;</span>: <span class="hljs-number">200</span>
                }
            ]
        }
    ],
    <span class="hljs-string">&quot;country&quot;</span>:<span class="hljs-string">&quot;BRA&quot;</span>,                                           <span class="hljs-comment">//string, nulo se n&#xE3;o enviado</span>
    <span class="hljs-string">&quot;postalCode&quot;</span>:<span class="hljs-string">&quot;22251-030&quot;</span>                                   <span class="hljs-comment">//string, nulo se n&#xE3;o enviado</span>
}
</code></pre>
<p><a name="a2"></a></p>
<h3 id="busca-informa%C3%A7%C3%B5es-de-uma-sku"><a name="busca-informa%C3%A7%C3%B5es-de-uma-sku" class="plugin-anchor" href="#busca-informa%C3%A7%C3%B5es-de-uma-sku"><span class="fa fa-link"></span></a>Busca Informa&#xE7;&#xF5;es de uma SKU</h3>
<p>Acessa uma loja VTEX e busca dados de uma SKU - Endpoint da Loja VTEX</p>
<p>endpoint: <code>http://[loja].vtexcommercestable.com.br/api/catalog_system/pvt/sku/stockkeepingunitbyid/[idsku]</code>
verb: <strong>GET</strong><br>
Accept: <strong>application/json</strong><br>
Parametro: <strong>idSku</strong> // identificador do SKU<br></p>
<p><em>response:</em></p>
<pre><code class="lang-json">{
    <span class="hljs-string">&quot;Id&quot;</span>: <span class="hljs-number">1634</span>, <span class="hljs-comment">//id da sku</span>
    <span class="hljs-string">&quot;ProductId&quot;</span>: <span class="hljs-number">1634</span>, <span class="hljs-comment">//id do produto pai da sku</span>
    <span class="hljs-string">&quot;NameComplete&quot;</span>: <span class="hljs-string">&quot;Primer Lisse Minute Clarins - Base Facial Alisadora 15ml&quot;</span>, <span class="hljs-comment">//nome completo</span>
    <span class="hljs-string">&quot;ProductName&quot;</span>: <span class="hljs-string">&quot;Primer Lisse Minute Clarins - Base Facial Alisadora&quot;</span>,
    <span class="hljs-string">&quot;ProductDescription&quot;</span>: <span class="hljs-string">&quot;&lt;strong&gt;Primer Lisse Minute&lt;/strong&gt; deixa a pele imediatante alisada e suave ao toque. O primer da &lt;strong&gt;Clarins&lt;/strong&gt; atenua as imperfei&#xE7;&#xF5;es e reduz a apar&#xEA;ncia dos poros. A pele fica linda a pronta para receber a make!&lt;/br&gt;Com o rosto limpo aplique o primer com os dedos ou com um pincel. Espalhe bem come&#xE7;ando pela zona T (testa, nariz e queixo) em dire&#xE7;&#xE3;o aos cantos externos do rosto.&quot;</span>,
    <span class="hljs-string">&quot;SkuName&quot;</span>: <span class="hljs-string">&quot;15ml&quot;</span>,<span class="hljs-comment">// nome da SKU</span>
    <span class="hljs-string">&quot;IsActive&quot;</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// est&#xE1; ativa?</span>
    <span class="hljs-string">&quot;IsTransported&quot;</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">&quot;IsInventoried&quot;</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">&quot;IsGiftCardRecharge&quot;</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-string">&quot;ImageUrl&quot;</span>: <span class="hljs-string">&quot;http://epocacosmeticos.vteximg.com.br/arquivos/ids/162097-55-55/primer-lisse-minute-15ml-clarins.jpg&quot;</span>,
    <span class="hljs-string">&quot;DetailUrl&quot;</span>: <span class="hljs-string">&quot;/primer-lisse-minute-clarins-base-facial-alisadora/p&quot;</span>, <span class="hljs-comment">//link do produto na loja</span>
    <span class="hljs-string">&quot;CSCIdentification&quot;</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">&quot;BrandId&quot;</span>: <span class="hljs-string">&quot;2000050&quot;</span>,<span class="hljs-comment">//identificador da marca</span>
    <span class="hljs-string">&quot;BrandName&quot;</span>: <span class="hljs-string">&quot;Clarins&quot;</span>, <span class="hljs-comment">//nome da marca</span>
    <span class="hljs-string">&quot;Dimension&quot;</span>: {<span class="hljs-comment">//dimens&#xF5;es</span>
        <span class="hljs-string">&quot;cubicweight&quot;</span>: <span class="hljs-number">0.2083</span>,
        <span class="hljs-string">&quot;height&quot;</span>: <span class="hljs-number">10</span>,
        <span class="hljs-string">&quot;length&quot;</span>: <span class="hljs-number">10</span>,
        <span class="hljs-string">&quot;weight&quot;</span>: <span class="hljs-number">100</span>,
        <span class="hljs-string">&quot;width&quot;</span>: <span class="hljs-number">10</span>
    },
    <span class="hljs-string">&quot;IsKit&quot;</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-string">&quot;KitItems&quot;</span>: [],
    <span class="hljs-string">&quot;Services&quot;</span>: [<span class="hljs-comment">//servi&#xE7;os</span>
        {
            <span class="hljs-string">&quot;Id&quot;</span>: <span class="hljs-number">1098</span>,
            <span class="hljs-string">&quot;Name&quot;</span>: <span class="hljs-string">&quot;Embalagem presente&quot;</span>,
            <span class="hljs-string">&quot;IsFile&quot;</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-string">&quot;IsGiftCard&quot;</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-string">&quot;IsRequired&quot;</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-string">&quot;Options&quot;</span>: [
                {
                    <span class="hljs-string">&quot;Id&quot;</span>: <span class="hljs-number">1098</span>,<span class="hljs-comment">// identificador do servi&#xE7;o</span>
                    <span class="hljs-string">&quot;Name&quot;</span>: <span class="hljs-string">&quot;Embalagem presente&quot;</span>,<span class="hljs-comment">//nome do servi&#xE7;o</span>
                    <span class="hljs-string">&quot;Description&quot;</span>: <span class="hljs-string">&quot;Embalagem presente&quot;</span>,
                    <span class="hljs-string">&quot;PriceName&quot;</span>: <span class="hljs-string">&quot;Embalagem presente&quot;</span>,
                    <span class="hljs-string">&quot;ListPrice&quot;</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">//pre&#xE7;o DE do servi&#xE7;o</span>
                    <span class="hljs-string">&quot;Price&quot;</span>: <span class="hljs-number">1</span> <span class="hljs-comment">//pre&#xE7;o POR do servi&#xE7;o</span>
                }
            ],
            <span class="hljs-string">&quot;Attachments&quot;</span>: []
        }
    ],
    <span class="hljs-string">&quot;Categories&quot;</span>: [],
    <span class="hljs-string">&quot;Attachments&quot;</span>: [],
    <span class="hljs-string">&quot;Collections&quot;</span>: [],
    <span class="hljs-string">&quot;SkuSellers&quot;</span>: [
        {
            <span class="hljs-string">&quot;SkuCommercialOffer&quot;</span>: {
                <span class="hljs-string">&quot;DeliverySlaSamples&quot;</span>: [
                    {
                        <span class="hljs-string">&quot;Region&quot;</span>: {
                            <span class="hljs-string">&quot;Id&quot;</span>: <span class="hljs-string">&quot;1&quot;</span>,
                            <span class="hljs-string">&quot;Name&quot;</span>: <span class="hljs-string">&quot;RJ&quot;</span>,
                            <span class="hljs-string">&quot;CountryCode&quot;</span>: <span class="hljs-string">&quot;BRA&quot;</span>,
                            <span class="hljs-string">&quot;ZipCode&quot;</span>: <span class="hljs-string">&quot;22080010&quot;</span>
                        },
                        <span class="hljs-string">&quot;DeliverySlaPerTypes&quot;</span>: [
                            {
                                <span class="hljs-string">&quot;TypeName&quot;</span>: <span class="hljs-string">&quot;Normal&quot;</span>,
                                <span class="hljs-string">&quot;Price&quot;</span>: <span class="hljs-number">9.9</span>,
                                <span class="hljs-string">&quot;Time&quot;</span>: <span class="hljs-string">&quot;00:00:00&quot;</span>
                            }
                        ]
                    }
                ],
                <span class="hljs-string">&quot;Price&quot;</span>: <span class="hljs-number">174</span>,
                <span class="hljs-string">&quot;ListPrice&quot;</span>: <span class="hljs-number">174</span>,
                <span class="hljs-string">&quot;AvailableQuantity&quot;</span>: <span class="hljs-number">22</span>
            },
            <span class="hljs-string">&quot;SellerId&quot;</span>: <span class="hljs-string">&quot;1&quot;</span>,
            <span class="hljs-string">&quot;StockKeepingUnitId&quot;</span>: <span class="hljs-number">1634</span>,
            <span class="hljs-string">&quot;SellerStockKeepingUnitId&quot;</span>: <span class="hljs-string">&quot;1634&quot;</span>,
            <span class="hljs-string">&quot;IsActive&quot;</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-string">&quot;FreightCommissionPercentage&quot;</span>: <span class="hljs-number">0</span>,
            <span class="hljs-string">&quot;ProductCommissionPercentage&quot;</span>: <span class="hljs-number">0</span>
        }
    ],
    <span class="hljs-string">&quot;SkuPriceSheet&quot;</span>: [],
    <span class="hljs-string">&quot;Images&quot;</span>: [ <span class="hljs-comment">//imagens, a primeira &#xE9; a principal</span>
        {
            <span class="hljs-string">&quot;ImageUrl&quot;</span>: <span class="hljs-string">&quot;http://epocacosmeticos.vteximg.com.br/arquivos/ids/162097/primer-lisse-minute-15ml-clarins.jpg&quot;</span>,
            <span class="hljs-string">&quot;ImageName&quot;</span>: <span class="hljs-literal">null</span>,
            <span class="hljs-string">&quot;FileId&quot;</span>: <span class="hljs-number">162097</span>
        }
    ],
    <span class="hljs-string">&quot;SkuSpecifications&quot;</span>: [ <span class="hljs-comment">//varia&#xE7;&#xF5;es</span>
        {
            <span class="hljs-string">&quot;FieldId&quot;</span>: <span class="hljs-number">283</span>,
            <span class="hljs-string">&quot;FieldName&quot;</span>: <span class="hljs-string">&quot;Varia&#xE7;&#xE3;o&quot;</span>,
            <span class="hljs-string">&quot;FieldValueIds&quot;</span>: [ <span class="hljs-comment">//identificador da varia&#xE7;&#xE3;o</span>
                <span class="hljs-number">2688</span>
            ],
            <span class="hljs-string">&quot;FieldValues&quot;</span>: [ <span class="hljs-comment">//valor da varia&#xE7;&#xE3;o</span>
                <span class="hljs-string">&quot;15ml&quot;</span>
            ]
        }
    ],
    <span class="hljs-string">&quot;ProductSpecifications&quot;</span>: [],
    <span class="hljs-string">&quot;ProductClustersIds&quot;</span>: <span class="hljs-string">&quot;135,149,150,151,152,153,154,155,156,157,158,159,160,161,219,310,358,366,406,407,408,451,473,480,486,525,535,546,549,552,561,569&quot;</span>,
    <span class="hljs-string">&quot;ProductCategoryIds&quot;</span>: <span class="hljs-string">&quot;/1000004/1000012/1000040/&quot;</span>, <span class="hljs-comment">//arvore de identificadores de categorias</span>
    <span class="hljs-string">&quot;ProductCategories&quot;</span>: {
        <span class="hljs-string">&quot;1000004&quot;</span>: <span class="hljs-string">&quot;Maquiagem&quot;</span>, <span class="hljs-comment">//identificador e nome da categoria</span>
        <span class="hljs-string">&quot;1000012&quot;</span>: <span class="hljs-string">&quot;Primer e Finalizador&quot;</span>,
        <span class="hljs-string">&quot;1000040&quot;</span>: <span class="hljs-string">&quot;Fixador da Maquiagem&quot;</span>
    },
    <span class="hljs-string">&quot;CommercialConditionId&quot;</span>: <span class="hljs-number">1</span>,
    <span class="hljs-string">&quot;RewardValue&quot;</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">&quot;AlternateIds&quot;</span>: {
        <span class="hljs-string">&quot;Ean&quot;</span>: <span class="hljs-string">&quot;3380814700219&quot;</span>,
        <span class="hljs-string">&quot;RefId&quot;</span>: <span class="hljs-string">&quot;005899&quot;</span>
    },
    <span class="hljs-string">&quot;AlternateIdValues&quot;</span>: [
        <span class="hljs-string">&quot;3380814700219&quot;</span>,
        <span class="hljs-string">&quot;005899&quot;</span>
    ],
    <span class="hljs-string">&quot;EstimatedDateArrival&quot;</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">&quot;MeasurementUnit&quot;</span>: <span class="hljs-string">&quot;un&quot;</span>,
    <span class="hljs-string">&quot;UnitMultiplier&quot;</span>: <span class="hljs-number">1</span>,
    <span class="hljs-string">&quot;InformationSource&quot;</span>: <span class="hljs-string">&quot;Indexer&quot;</span>,
    <span class="hljs-string">&quot;ModalType&quot;</span>: <span class="hljs-literal">null</span>
}
</code></pre>
<hr>
<h3 id="simula%C3%A7%C3%A3o-de-carrinho-e-p%C3%A1gina-de-pagamento"><a name="simula%C3%A7%C3%A3o-de-carrinho-e-p%C3%A1gina-de-pagamento" class="plugin-anchor" href="#simula%C3%A7%C3%A3o-de-carrinho-e-p%C3%A1gina-de-pagamento"><span class="fa fa-link"></span></a>Simula&#xE7;&#xE3;o de Carrinho e P&#xE1;gina de Pagamento</h3>
<p>Este t&#xF3;pico tem por objetivo auxiliar o na simula&#xE7;&#xE3;o de carrinho, e consulta de formas de pagamento e  parcelamentos entre um Marketplace n&#xE3;o VTEX com uma loja VTEX.</p>
<h3 id="no-carrinho-e-no-pagamento"><a name="no-carrinho-e-no-pagamento" class="plugin-anchor" href="#no-carrinho-e-no-pagamento"><span class="fa fa-link"></span></a>No Carrinho e no Pagamento</h3>
<p>Quando um produto &#xE9; inserido no carrinho no Marketplace N&#xE3;o VTEX, ou faz se alguma edi&#xE7;&#xE3;o no carrinho, uma consulta de simula&#xE7;&#xE3;o de carrinho dever&#xE1; ser feita na loja VTEX para checar a validade das condi&#xE7;&#xF5;es comerciais (pre&#xE7;o, estoque, frete e SLAs de entrega). Quando o cliente vai para o pagamento, uma consulta as formas de pagamento, aos parcelamentos e uma outra simula&#xE7;&#xE3;o de carrinho dever&#xE1; ser realizada.</p>
<p><em>Fluxo de chamadas no carrinho e no pagamento:</em></p>
<p><img src="fechato-canal-nao-vtex-com-pgto.png" alt="alt text" title="fechamento do pedido no marketplace"></p>
<h3 id="simula%C3%A7ao-de-carrinho"><a name="simula%C3%A7ao-de-carrinho" class="plugin-anchor" href="#simula%C3%A7ao-de-carrinho"><span class="fa fa-link"></span></a>Simula&#xE7;ao de Carrinho</h3>
<p>Acessa a loja VTEX simulando um carrinho, para checar as condi&#xE7;&#xF5;es comerciais e as SLAs de entrega - Endpoint loja VTEX</p>
<p>endpoint: <code>https://[loja].vtexcommercestable.com.br/api/fulfillment/pvt/orderForms/simulation?sc=[idcanal]&amp;affiliateId=[idafiliado]</code>
verb: <strong>POST</strong><br>
Content-Type: <strong>application/json</strong><br>
Accept: <strong>application/json</strong><br>
Parametro: <strong>sc</strong> // sc &#xE9; o canal de vendas<br>
Parametro: <strong>affiliateId</strong> // affiliateId &#xE9; o id do afiliado cadastrado na loja VTEX<br></p>
<p><em>request:</em></p>
<pre><code class="lang-json">{
    <span class="hljs-string">&quot;postalCode&quot;</span>:<span class="hljs-string">&quot;22251-030&quot;</span>,            <span class="hljs-comment">//obrigat&#xF3;rio se country estiver preenchido, string</span>
    <span class="hljs-string">&quot;country&quot;</span>:<span class="hljs-string">&quot;BRA&quot;</span>,                     <span class="hljs-comment">//obrigat&#xF3;rio se postalCode estiver preenchido, string</span>
    <span class="hljs-string">&quot;items&quot;</span>: [                           <span class="hljs-comment">//obrigat&#xF3;rio: deve conter pelo menos um objeto item</span>
        {
            <span class="hljs-string">&quot;id&quot;</span>:<span class="hljs-string">&quot;287611&quot;</span>,               <span class="hljs-comment">//obrigat&#xF3;rio, string</span>
            <span class="hljs-string">&quot;quantity&quot;</span>:<span class="hljs-number">1</span>,                <span class="hljs-comment">//obrigat&#xF3;rio-quantidade do item a ser simulada, int</span>
            <span class="hljs-string">&quot;seller&quot;</span>:<span class="hljs-string">&quot;seller1&quot;</span>           <span class="hljs-comment">//sigla do do seller criado no admin // obrigat&#xF3;rio, string</span>
        },
        {
            <span class="hljs-string">&quot;id&quot;</span>:<span class="hljs-string">&quot;5837&quot;</span>,
            <span class="hljs-string">&quot;quantity&quot;</span>:<span class="hljs-number">5</span>,
            <span class="hljs-string">&quot;seller&quot;</span>:<span class="hljs-string">&quot;seller1&quot;</span>
        }
    ]
}
</code></pre>
<p><em>response:</em></p>
<pre><code class="lang-json">{
    <span class="hljs-string">&quot;items&quot;</span>: [                                                     <span class="hljs-comment">//pode vir um array vazio</span>
        {
            <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;287611&quot;</span>,                                        <span class="hljs-comment">//obrigat&#xF3;rio, string</span>
            <span class="hljs-string">&quot;requestIndex&quot;</span>: <span class="hljs-number">0</span>,                                     <span class="hljs-comment">//obrigat&#xF3;rio, int - representa a posi&#xE7;&#xE3;o desse item no array original,</span>
            <span class="hljs-string">&quot;price&quot;</span>: <span class="hljs-number">7390</span>,                                         <span class="hljs-comment">// Os dois d&#xED;gitos menos significativos s&#xE3;o os centavos //obrigat&#xF3;rio, int</span>
            <span class="hljs-string">&quot;listPrice&quot;</span>: <span class="hljs-number">7490</span>,                                     <span class="hljs-comment">// Os dois d&#xED;gitos menos significativos s&#xE3;o os centavos //obrigat&#xF3;rio, int</span>
            <span class="hljs-string">&quot;quantity&quot;</span>: <span class="hljs-number">1</span>,                                         <span class="hljs-comment">//obrigat&#xF3;rio, int</span>
            <span class="hljs-string">&quot;seller&quot;</span>: <span class="hljs-string">&quot;1&quot;</span>,                                         <span class="hljs-comment">// Id do seller cadastrado na loja // obrigat&#xF3;rio, string,</span>
            <span class="hljs-string">&quot;merchantName&quot;</span>: <span class="hljs-string">&quot;sandboxintegracao&quot;</span>,                               <span class="hljs-comment">// referente ao pagamento, ser&#xE1; usado ao enviar o pedido</span>
            <span class="hljs-string">&quot;priceValidUntil&quot;</span>: <span class="hljs-string">&quot;2014-03-01T22:58:28.143&quot;</span>           <span class="hljs-comment">//data, pode ser nulo</span>
            <span class="hljs-string">&quot;offerings&quot;</span>:[                                           <span class="hljs-comment">//Array opcional, por&#xE9;m n&#xE3;o pode ser nulo: enviar array vazio ou n&#xE3;o enviar a propriedade</span>
                {
                    <span class="hljs-string">&quot;type&quot;</span>:<span class="hljs-string">&quot;Garantia&quot;</span>,                               <span class="hljs-comment">//obrigat&#xF3;rio, string</span>
                    <span class="hljs-string">&quot;id&quot;</span>:<span class="hljs-string">&quot;5&quot;</span>,                                       <span class="hljs-comment">//obrigat&#xF3;rio, string</span>
                    <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;Garantia de 1 ano&quot;</span>,                       <span class="hljs-comment">//obrigat&#xF3;rio, string</span>
                    <span class="hljs-string">&quot;price&quot;</span>:<span class="hljs-number">10000</span>                                   <span class="hljs-comment">//Os dois d&#xED;gitos menos significativos s&#xE3;o os centavos //obrigat&#xF3;rio, int</span>
                },
                {
                    <span class="hljs-string">&quot;type&quot;</span>:<span class="hljs-string">&quot;Embalagem de Presente&quot;</span>,
                    <span class="hljs-string">&quot;id&quot;</span>:<span class="hljs-string">&quot;6&quot;</span>,
                    <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;Embalagem de Presente&quot;</span>,
                    <span class="hljs-string">&quot;price&quot;</span>:<span class="hljs-number">250</span>
                }
            ]
        },
        {
            <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;5837&quot;</span>,
            <span class="hljs-string">&quot;requestIndex&quot;</span>: <span class="hljs-number">1</span>,
            <span class="hljs-string">&quot;price&quot;</span>: <span class="hljs-number">890</span>,                                          <span class="hljs-comment">// Os dois d&#xED;gitos menos significativos s&#xE3;o os centavos</span>
            <span class="hljs-string">&quot;listPrice&quot;</span>: <span class="hljs-number">990</span>,                                      <span class="hljs-comment">// Os dois d&#xED;gitos menos significativos s&#xE3;o os centavos</span>
            <span class="hljs-string">&quot;quantity&quot;</span>: <span class="hljs-number">5</span>,
            <span class="hljs-string">&quot;seller&quot;</span>: <span class="hljs-string">&quot;1&quot;</span>,
            <span class="hljs-string">&quot;merchantName&quot;</span>: <span class="hljs-string">&quot;sandboxintegracao&quot;</span>,
            <span class="hljs-string">&quot;priceValidUntil&quot;</span>: <span class="hljs-literal">null</span>
        }
    ],
    <span class="hljs-string">&quot;logisticsInfo&quot;</span>: [                                            <span class="hljs-comment">//**, obrigat&#xF3;rio (se vier vazio &#xE9; considerado que o item n&#xE3;o est&#xE1; dispon&#xED;vel) -  todos os itens devem ter os mesmos SLAs</span>
        {
            <span class="hljs-string">&quot;itemIndex&quot;</span>: <span class="hljs-number">0</span>,                                       <span class="hljs-comment">//obrigat&#xF3;rio, int - representa os dados de sla do item de resposta (response)</span>
            <span class="hljs-string">&quot;stockBalance&quot;</span>: <span class="hljs-number">99</span>,                                   <span class="hljs-comment">//obrigat&#xF3;rio  quando o CEP foi passado no request, estoque, int</span>
            <span class="hljs-string">&quot;quantity&quot;</span>: <span class="hljs-number">1</span>,                                        <span class="hljs-comment">//obrigat&#xF3;rio quando o CEP foi passado no request, qauntidade pasada no request, int</span>
            <span class="hljs-string">&quot;shipsTo&quot;</span>: [ <span class="hljs-string">&quot;BRA&quot;</span>, <span class="hljs-string">&quot;USA&quot;</span> ],                          <span class="hljs-comment">//obrigat&#xF3;rio, array de string com as siglas dos pa&#xED;ses de entrega</span>
            <span class="hljs-string">&quot;slas&quot;</span>: [                                             <span class="hljs-comment">//obrigat&#xF3;rio quando o CEP foi passado no request. Pode ser um array vazio</span>
                {
                    <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;Expressa&quot;</span>,                             <span class="hljs-comment">//obrigat&#xF3;rio, id tipo entrega, string</span>
                    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Entrega Expressa&quot;</span>,                   <span class="hljs-comment">//obrigat&#xF3;rio, nome do tipo entrega, string</span>
                    <span class="hljs-string">&quot;shippingEstimate&quot;</span>: <span class="hljs-string">&quot;2bd&quot;</span>,                    <span class="hljs-comment">// bd == &quot;business days&quot; //obrigat&#xF3;rio, string</span>
                    <span class="hljs-string">&quot;price&quot;</span>: <span class="hljs-number">1000</span>                                 <span class="hljs-comment">// Os dois d&#xED;gitos menos significativos s&#xE3;o os centavos, obrigat&#xF3;rio, int</span>
                    <span class="hljs-string">&quot;availableDeliveryWindows&quot;</span>: [                 <span class="hljs-comment">//opcional, podendo ser um array vazio</span>
                    ]
                },
                {
                    <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;Agendada&quot;</span>,
                    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Entrega Agendada&quot;</span>,
                    <span class="hljs-string">&quot;shippingEstimate&quot;</span>: <span class="hljs-string">&quot;5d&quot;</span>,                     <span class="hljs-comment">// d - &quot;days, bd - &quot;business days&quot;</span>
                    <span class="hljs-string">&quot;price&quot;</span>: <span class="hljs-number">800</span>,
                    <span class="hljs-string">&quot;availableDeliveryWindows&quot;</span>: [
                         {
                            <span class="hljs-string">&quot;startDateUtc&quot;</span>: <span class="hljs-string">&quot;2013-02-04T08:00:00+00:00&quot;</span>,       <span class="hljs-comment">//date, obrigat&#xF3;rio se for enviado delivery window</span>
                            <span class="hljs-string">&quot;endDateUtc&quot;</span>: <span class="hljs-string">&quot;2013-02-04T13:00:00+00:00&quot;</span>,         <span class="hljs-comment">//date, obrigat&#xF3;rio se for enviado delivery window</span>
                            <span class="hljs-string">&quot;price&quot;</span>: <span class="hljs-number">0</span>        <span class="hljs-comment">//int, obrigat&#xF3;rio se for enviado delivery window - o valor total da entrega agendada &#xE9; o valor base mais o valor desse campo</span>
                        },
                    ]
                }
            ]
        },
        {
            <span class="hljs-string">&quot;itemIndex&quot;</span>: <span class="hljs-number">1</span>,
            <span class="hljs-string">&quot;stockBalance&quot;</span>: <span class="hljs-number">1237</span>,
            <span class="hljs-string">&quot;quantity&quot;</span>: <span class="hljs-number">5</span>,
            <span class="hljs-string">&quot;shipsTo&quot;</span>: [ <span class="hljs-string">&quot;BRA&quot;</span> ],
            <span class="hljs-string">&quot;slas&quot;</span>: [
                {
                    <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;Normal&quot;</span>,
                    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Entrega Normal&quot;</span>,
                    <span class="hljs-string">&quot;shippingEstimate&quot;</span>: <span class="hljs-string">&quot;5bd&quot;</span>,                                  <span class="hljs-comment">// bd - &quot;business days&quot;</span>
                    <span class="hljs-string">&quot;price&quot;</span>: <span class="hljs-number">200</span>
                }
            ]
        }
    ],
    <span class="hljs-string">&quot;country&quot;</span>:<span class="hljs-string">&quot;BRA&quot;</span>,                                           <span class="hljs-comment">//string, nulo se n&#xE3;o enviado</span>
    <span class="hljs-string">&quot;postalCode&quot;</span>:<span class="hljs-string">&quot;22251-030&quot;</span>                                   <span class="hljs-comment">//string, nulo se n&#xE3;o enviado</span>
}
</code></pre>
<blockquote>
<p>Caso o CEP e Pais n&#xE3;o for enviado, n&#xE3;o ser&#xE1; retornado informa&#xE7;&#xF5;es de SLA de entrega</p>
</blockquote>
<p><a name="a5"></a></p>
<h3 id="consulta-as-formas-de-pagamento-dispon%C3%ADveis-no-seller"><a name="consulta-as-formas-de-pagamento-dispon%C3%ADveis-no-seller" class="plugin-anchor" href="#consulta-as-formas-de-pagamento-dispon%C3%ADveis-no-seller"><span class="fa fa-link"></span></a>Consulta as Formas de Pagamento Dispon&#xED;veis no Seller</h3>
<p>Acessa a loja VTEX para consultar a formas de pagamento dispon&#xED;veis - Endpoint loja VTEX</p>
<p>endpoint: <code>https://[loja].vtexpayments.com.br/api/pvt/merchants/payment-systems</code>
verb: <strong>GET</strong><br>
Content-Type: <strong>application/json</strong><br>
Accept: <strong>application/json</strong><br></p>
<p><em>response:</em></p>
<pre><code class="lang-json">[
    {
        <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">6</span>, <span class="hljs-comment">//identificador da forma de pagamento</span>
        <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Boleto Banc&#xE1;rio&quot;</span>, <span class="hljs-comment">//nome da forma de pagamento</span>
        <span class="hljs-string">&quot;connectorId&quot;</span>: <span class="hljs-number">0</span>,
        <span class="hljs-string">&quot;requiresDocument&quot;</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-string">&quot;implementation&quot;</span>: <span class="hljs-string">&quot;Vtex.PaymentGateway.BankIssuedInvoice.BankIssuedInvoicePayment&quot;</span>,
        <span class="hljs-string">&quot;connectorImplementation&quot;</span>: <span class="hljs-string">&quot;Vtex.PaymentGateway.Connectors.BankIssuedInvoiceBBConnector&quot;</span>,
        <span class="hljs-string">&quot;groupName&quot;</span>: <span class="hljs-string">&quot;bankInvoice&quot;</span>,
        <span class="hljs-string">&quot;isCustom&quot;</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-string">&quot;isSelfAuthorized&quot;</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-string">&quot;allowInstallments&quot;</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-string">&quot;isAvailable&quot;</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// esta dispon&#xED;vel?</span>
        <span class="hljs-string">&quot;description&quot;</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-string">&quot;validator&quot;</span>: {
            <span class="hljs-string">&quot;regex&quot;</span>: <span class="hljs-literal">null</span>,
            <span class="hljs-string">&quot;mask&quot;</span>: <span class="hljs-literal">null</span>,
            <span class="hljs-string">&quot;cardCodeMask&quot;</span>: <span class="hljs-literal">null</span>,
            <span class="hljs-string">&quot;cardCodeRegex&quot;</span>: <span class="hljs-literal">null</span>,
            <span class="hljs-string">&quot;weights&quot;</span>: <span class="hljs-literal">null</span>,
            <span class="hljs-string">&quot;useCvv&quot;</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-string">&quot;useExpirationDate&quot;</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-string">&quot;useCardHolderName&quot;</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-string">&quot;useBillingAddress&quot;</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-string">&quot;validCardLengths&quot;</span>: <span class="hljs-literal">null</span>
        },
        <span class="hljs-string">&quot;dueDate&quot;</span>: <span class="hljs-string">&quot;2015-01-19T14:49:14.4767186Z&quot;</span>
    },
    {
        <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">2</span>, <span class="hljs-comment">//identificador da forma de pagamento</span>
        <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Visa&quot;</span>, <span class="hljs-comment">//nome da forma de pagamento</span>
        <span class="hljs-string">&quot;connectorId&quot;</span>: <span class="hljs-number">0</span>,
        <span class="hljs-string">&quot;requiresDocument&quot;</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-string">&quot;implementation&quot;</span>: <span class="hljs-string">&quot;Vtex.PaymentGateway.CreditCard.Visa&quot;</span>,
        <span class="hljs-string">&quot;connectorImplementation&quot;</span>: <span class="hljs-string">&quot;Vtex.PaymentGateway.Connectors.AdyenConnector&quot;</span>,
        <span class="hljs-string">&quot;groupName&quot;</span>: <span class="hljs-string">&quot;creditCard&quot;</span>,
        <span class="hljs-string">&quot;isCustom&quot;</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-string">&quot;isSelfAuthorized&quot;</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-string">&quot;allowInstallments&quot;</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// habilita parcelamento?</span>
        <span class="hljs-string">&quot;isAvailable&quot;</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// esta dispon&#xED;vel?</span>
        <span class="hljs-string">&quot;description&quot;</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-string">&quot;validator&quot;</span>: {
            <span class="hljs-string">&quot;regex&quot;</span>: <span class="hljs-string">&quot;^4&quot;</span>, <span class="hljs-comment">// regular expression de valida&#xE7;&#xE3;o</span>
            <span class="hljs-string">&quot;mask&quot;</span>: <span class="hljs-string">&quot;9999 9999 9999 9999&quot;</span>, <span class="hljs-comment">// mascara de valida&#xE7;&#xE3;o</span>
            <span class="hljs-string">&quot;cardCodeMask&quot;</span>: <span class="hljs-string">&quot;999&quot;</span>, <span class="hljs-comment">// mascara do cvv</span>
            <span class="hljs-string">&quot;cardCodeRegex&quot;</span>: <span class="hljs-string">&quot;^[0-9]{3}$&quot;</span>, <span class="hljs-comment">// regilar expression que valida o cvv</span>
            <span class="hljs-string">&quot;weights&quot;</span>: [<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>],
            <span class="hljs-string">&quot;useCvv&quot;</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">//cvv &#xE9; obrigat&#xF3;rio?</span>
            <span class="hljs-string">&quot;useExpirationDate&quot;</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">//usa data de expira&#xE7;&#xE3;o?</span>
            <span class="hljs-string">&quot;useCardHolderName&quot;</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">//nome do portador obrigat&#xF3;rio?</span>
            <span class="hljs-string">&quot;useBillingAddress&quot;</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">//usa ender&#xE7;o de cobran&#xE7;a?</span>
            <span class="hljs-string">&quot;validCardLengths&quot;</span>: <span class="hljs-literal">null</span>
        },
        <span class="hljs-string">&quot;dueDate&quot;</span>: <span class="hljs-string">&quot;2015-01-17T14:49:14.4767186Z&quot;</span>
    },
    {
        <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">4</span>,
        <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Mastercard&quot;</span>,
        <span class="hljs-string">&quot;connectorId&quot;</span>: <span class="hljs-number">0</span>,
        <span class="hljs-string">&quot;requiresDocument&quot;</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-string">&quot;implementation&quot;</span>: <span class="hljs-string">&quot;Vtex.PaymentGateway.CreditCard.Mastercard&quot;</span>,
        <span class="hljs-string">&quot;connectorImplementation&quot;</span>: <span class="hljs-string">&quot;Vtex.PaymentGateway.Connectors.AdyenConnector&quot;</span>,
        <span class="hljs-string">&quot;groupName&quot;</span>: <span class="hljs-string">&quot;creditCard&quot;</span>,
        <span class="hljs-string">&quot;isCustom&quot;</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-string">&quot;isSelfAuthorized&quot;</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-string">&quot;allowInstallments&quot;</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-string">&quot;isAvailable&quot;</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-string">&quot;description&quot;</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-string">&quot;validator&quot;</span>: {
            <span class="hljs-string">&quot;regex&quot;</span>: <span class="hljs-string">&quot;^5(1(0(0(0([0-9])|[1-9][0-9])|[1-9][0-9]{0})|[1-9][0-9]{0})|3(0(4(0([0-9]))|[0-3][0-9]{0}))|2[0-9]{0})|^5(3(0(4(2([0-9])|[3-9][0-9])|[5-9][0-9]{0})|[1-9][0-9]{0})|5(9(9(9([0-9])|[0-8][0-9])|[0-8][0-9]{0})|[0-8][0-9]{0})|4[0-9]{0})&quot;</span>,
            <span class="hljs-string">&quot;mask&quot;</span>: <span class="hljs-string">&quot;9999 9999 9999 9999&quot;</span>,
            <span class="hljs-string">&quot;cardCodeMask&quot;</span>: <span class="hljs-string">&quot;999&quot;</span>,
            <span class="hljs-string">&quot;cardCodeRegex&quot;</span>: <span class="hljs-string">&quot;^[0-9]{3}$&quot;</span>,
            <span class="hljs-string">&quot;weights&quot;</span>: [<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>],
            <span class="hljs-string">&quot;useCvv&quot;</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-string">&quot;useExpirationDate&quot;</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-string">&quot;useCardHolderName&quot;</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-string">&quot;useBillingAddress&quot;</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-string">&quot;validCardLengths&quot;</span>: <span class="hljs-literal">null</span>
        },
        <span class="hljs-string">&quot;dueDate&quot;</span>: <span class="hljs-string">&quot;2015-01-17T14:49:14.4767186Z&quot;</span>
    }
]
</code></pre>
<p><a name="a6"></a></p>
<h3 id="consulta-os-parcelamentos-no-seller"><a name="consulta-os-parcelamentos-no-seller" class="plugin-anchor" href="#consulta-os-parcelamentos-no-seller"><span class="fa fa-link"></span></a>Consulta os Parcelamentos no Seller</h3>
<p>Consulta a loja VTEX para buscar os parcelamentos por forma de pagamento e promo&#xE7;&#xF5;es de SKU - Endpoint loja VTEX</p>
<p>endpoint: <code>https://[loja].vtexpayments.com.br/api/pvt/installments/options</code>
verb: <strong>POST</strong><br>
Content-Type: <strong>application/json</strong><br>
Accept: <strong>application/json</strong><br></p>
<p><em>request:</em></p>
<pre><code class="lang-json">{
  <span class="hljs-string">&quot;PaymentSystemsIds&quot;</span>:[<span class="hljs-number">2</span>,<span class="hljs-number">4</span>], <span class="hljs-comment">//ids das formas de pagamento</span>
  <span class="hljs-string">&quot;SubtotalAsInt&quot;</span>:<span class="hljs-number">81200</span>, <span class="hljs-comment">// valor que se deseja parcelar</span>
  <span class="hljs-string">&quot;Items&quot;</span>:[ <span class="hljs-comment">// array de itens que desja parcelar</span>
    {
          <span class="hljs-string">&quot;PriceAsInt&quot;</span>:<span class="hljs-number">81200</span>, <span class="hljs-comment">//pre&#xE7;o da SKU</span>
         <span class="hljs-string">&quot;Quantity&quot;</span>:<span class="hljs-number">1</span>, <span class="hljs-comment">// quantida da SKU que deseja parcelar</span>
         <span class="hljs-string">&quot;Id&quot;</span>:<span class="hljs-number">2000037</span>, <span class="hljs-comment">// identificador da SKU</span>
         <span class="hljs-string">&quot;SellerId&quot;</span>:<span class="hljs-string">&quot;1&quot;</span>,
        <span class="hljs-string">&quot;SalesChannel&quot;</span>:<span class="hljs-number">4</span>
    }
  ]
}
</code></pre>
<p><em>response:</em></p>
<pre><code class="lang-json">[
    {
        <span class="hljs-string">&quot;paymentSystem&quot;</span>: <span class="hljs-number">2</span>, <span class="hljs-comment">//identificador da forma de pagamento</span>
        <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Visa 3 vezes sem juros&quot;</span>, <span class="hljs-comment">//nome do parcelamento</span>
        <span class="hljs-string">&quot;groupName&quot;</span>: <span class="hljs-string">&quot;creditCard&quot;</span>,
        <span class="hljs-string">&quot;value&quot;</span>: <span class="hljs-number">81200</span>, <span class="hljs-comment">//valor total do parcelamento</span>
        <span class="hljs-string">&quot;installments&quot;</span>: [
            {
                <span class="hljs-string">&quot;count&quot;</span>: <span class="hljs-number">3</span>, <span class="hljs-comment">//numero de parcelas</span>
                <span class="hljs-string">&quot;value&quot;</span>: <span class="hljs-number">27066</span>, <span class="hljs-comment">//valor da parcela</span>
                <span class="hljs-string">&quot;interestRate&quot;</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">//taxa de juros</span>
                <span class="hljs-string">&quot;hasInterestRate&quot;</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">//tem juros?</span>
            },
            {
                <span class="hljs-string">&quot;count&quot;</span>: <span class="hljs-number">2</span>,
                <span class="hljs-string">&quot;value&quot;</span>: <span class="hljs-number">40600</span>,
                <span class="hljs-string">&quot;interestRate&quot;</span>: <span class="hljs-number">0</span>,
                <span class="hljs-string">&quot;hasInterestRate&quot;</span>: <span class="hljs-literal">false</span>
            },
            {
                <span class="hljs-string">&quot;count&quot;</span>: <span class="hljs-number">1</span>,
                <span class="hljs-string">&quot;value&quot;</span>: <span class="hljs-number">81200</span>,
                <span class="hljs-string">&quot;interestRate&quot;</span>: <span class="hljs-number">0</span>,
                <span class="hljs-string">&quot;hasInterestRate&quot;</span>: <span class="hljs-literal">false</span>
            }
        ]
    },
    {
        <span class="hljs-string">&quot;paymentSystem&quot;</span>: <span class="hljs-number">4</span>,
        <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Mastercard 3 vezes sem juros&quot;</span>,
        <span class="hljs-string">&quot;groupName&quot;</span>: <span class="hljs-string">&quot;creditCard&quot;</span>,
        <span class="hljs-string">&quot;value&quot;</span>: <span class="hljs-number">81200</span>,
        <span class="hljs-string">&quot;installments&quot;</span>: [
            {
                <span class="hljs-string">&quot;count&quot;</span>: <span class="hljs-number">3</span>,
                <span class="hljs-string">&quot;value&quot;</span>: <span class="hljs-number">27066</span>,
                <span class="hljs-string">&quot;interestRate&quot;</span>: <span class="hljs-number">0</span>,
                <span class="hljs-string">&quot;hasInterestRate&quot;</span>: <span class="hljs-literal">false</span>
            },
            {
                <span class="hljs-string">&quot;count&quot;</span>: <span class="hljs-number">2</span>,
                <span class="hljs-string">&quot;value&quot;</span>: <span class="hljs-number">40600</span>,
                <span class="hljs-string">&quot;interestRate&quot;</span>: <span class="hljs-number">0</span>,
                <span class="hljs-string">&quot;hasInterestRate&quot;</span>: <span class="hljs-literal">false</span>
            },
            {
                <span class="hljs-string">&quot;count&quot;</span>: <span class="hljs-number">1</span>,
                <span class="hljs-string">&quot;value&quot;</span>: <span class="hljs-number">81200</span>,
                <span class="hljs-string">&quot;interestRate&quot;</span>: <span class="hljs-number">0</span>,
                <span class="hljs-string">&quot;hasInterestRate&quot;</span>: <span class="hljs-literal">false</span>
            }
        ]
    }
]
</code></pre>
<h3 id="enviar-pedido-enviar-pagamento-e-autorizar-despacho"><a name="enviar-pedido-enviar-pagamento-e-autorizar-despacho" class="plugin-anchor" href="#enviar-pedido-enviar-pagamento-e-autorizar-despacho"><span class="fa fa-link"></span></a>Enviar Pedido, Enviar Pagamento e Autorizar Despacho</h3>
<p>Este t&#xF3;pico tem por objetivo auxiliar um Marketplace n&#xE3;o VTEX enviar um pedido, enviar uma transa&#xE7;&#xE3;o de pagamento, e enviar autoriza&#xE7;&#xE3;o para despacho (proceder com o fulfillment do pedido).</p>
<p>Caso se queira uma condi&#xE7;&#xE3;o comercial diferenciada para o Marketplace n&#xE3;o VTEX, na loja VTEX dever&#xE1; ser criado uma nova politica comercial, podendo assim criar promo&#xE7;&#xF5;es diferenciadas (desconto, frete, etc) somente para o afiliado desejado. Caso <strong>n&#xE3;o</strong> tenha politica comercial diferenciada, deve se usar a pol&#xED;tica comercial da loja principal (sc=1).</p>
<p><em>Fluxo de chamadas de descida de pedido, pagamento e autoriza&#xE7;&#xE3;o para despachar:</em></p>
<p><img src="order-canal-n-vtex-com-pgto.PNG" alt="alt text" title="Title"></p>
<p><a name="a7"></a></p>
<h3 id="enviar-pedido"><a name="enviar-pedido" class="plugin-anchor" href="#enviar-pedido"><span class="fa fa-link"></span></a>Enviar Pedido</h3>
<p>Quando o pedido &#xE9; fechado em um Marketplace n&#xE3;o VTEX, um POST deve ser feito na loja VTEX, para que essa possa receber a ordem de pedido - Endpoint Loja VTEX</p>
<p>endpoint: <code>https://[loja].vtexcommercestable.com.br/api/fulfillment/pvt/orders?sc=[idcanal]&amp;affiliateId=[idafiliado]</code>
verb: <strong>POST</strong><br>
Content-Type: <strong>application/json</strong><br>
Accept: <strong>application/json</strong><br>
Parametro: <strong>sc</strong> // sc &#xE9; o canal de vendas cadastrado na VTEX.<br>
Parametro: <strong>affiliateId</strong> // affiliateId &#xE9; o id do afiliado cadastrado n loja VTEX<br></p>
<p><em>request:</em></p>
<pre><code class="lang-json">{
    <span class="hljs-string">&quot;marketplaceOrderId&quot;</span>: <span class="hljs-string">&quot;959311095&quot;</span>, <span class="hljs-comment">//identificador do pedido no marketplace</span>
    <span class="hljs-string">&quot;marketplaceServicesEndpoint&quot;</span>: <span class="hljs-string">&quot;https://urlmarketplace/&quot;</span>, <span class="hljs-comment">//leia o t&#xF3;pico implementando MarketplaceServicesEndpoint Actions</span>
    <span class="hljs-string">&quot;marketplacePaymentValue&quot;</span>: <span class="hljs-number">11080</span>, <span class="hljs-comment">//valor que o marketplace se compromete a pagar para o Seller</span>
    <span class="hljs-string">&quot;items&quot;</span>: [
      {
        <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;2002495&quot;</span>,
        <span class="hljs-string">&quot;quantity&quot;</span>: <span class="hljs-number">1</span>,
        <span class="hljs-string">&quot;seller&quot;</span>: <span class="hljs-string">&quot;1&quot;</span>,
        <span class="hljs-string">&quot;commission&quot;</span>: <span class="hljs-number">0</span>,
        <span class="hljs-string">&quot;freightCommission&quot;</span>: <span class="hljs-number">0</span>,
        <span class="hljs-string">&quot;price&quot;</span>: <span class="hljs-number">9990</span>,
        <span class="hljs-string">&quot;bundleItems&quot;</span>: [], <span class="hljs-comment">//servi&#xE7;os. Ex: embalagem pra presente.</span>
        <span class="hljs-string">&quot;itemAttachment&quot;</span>: {
          <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-literal">null</span>,
          <span class="hljs-string">&quot;content&quot;</span>: {}
        },
        <span class="hljs-string">&quot;attachments&quot;</span>: [], <span class="hljs-comment">//customiza&#xE7;&#xE3;o do item, Ex:camisa com o numero 10</span>
        <span class="hljs-string">&quot;priceTags&quot;</span>: [],
        <span class="hljs-string">&quot;measurementUnit&quot;</span>: <span class="hljs-literal">null</span>, unidade de medida
        <span class="hljs-string">&quot;unitMultiplier&quot;</span>: <span class="hljs-number">0</span>, unidade multipladora,Ex: venda por quilo
        <span class="hljs-string">&quot;isGift&quot;</span>: <span class="hljs-literal">false</span>
      }
    ],
    <span class="hljs-string">&quot;clientProfileData&quot;</span>: {
      <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;clientProfileData&quot;</span>,
      <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;32172239852@gmail.com.br&quot;</span>,
      <span class="hljs-string">&quot;firstName&quot;</span>: <span class="hljs-string">&quot;Jonas&quot;</span>,
      <span class="hljs-string">&quot;lastName&quot;</span>: <span class="hljs-string">&quot;Alves de Oliveira&quot;</span>,
      <span class="hljs-string">&quot;documentType&quot;</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-string">&quot;document&quot;</span>: <span class="hljs-string">&quot;3244239851&quot;</span>,
      <span class="hljs-string">&quot;phone&quot;</span>: <span class="hljs-string">&quot;399271258&quot;</span>,
      <span class="hljs-string">&quot;corporateName&quot;</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-string">&quot;tradeName&quot;</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-string">&quot;corporateDocument&quot;</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-string">&quot;stateInscription&quot;</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-string">&quot;corporatePhone&quot;</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-string">&quot;isCorporate&quot;</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-string">&quot;userProfileId&quot;</span>: <span class="hljs-literal">null</span>
    },
    <span class="hljs-string">&quot;shippingData&quot;</span>: {
      <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;shippingData&quot;</span>,
      <span class="hljs-string">&quot;address&quot;</span>: {
        <span class="hljs-string">&quot;addressType&quot;</span>: <span class="hljs-string">&quot;Residencial&quot;</span>,
        <span class="hljs-string">&quot;receiverName&quot;</span>: <span class="hljs-string">&quot;Jonas Alves de Oliveira&quot;</span>,
        <span class="hljs-string">&quot;addressId&quot;</span>: <span class="hljs-string">&quot;Casa&quot;</span>,
        <span class="hljs-string">&quot;postalCode&quot;</span>: <span class="hljs-string">&quot;13476103&quot;</span>,
        <span class="hljs-string">&quot;city&quot;</span>: <span class="hljs-string">&quot;Americana&quot;</span>,
        <span class="hljs-string">&quot;state&quot;</span>: <span class="hljs-string">&quot;SP&quot;</span>,
        <span class="hljs-string">&quot;country&quot;</span>: <span class="hljs-string">&quot;BRA&quot;</span>,
        <span class="hljs-string">&quot;street&quot;</span>: <span class="hljs-string">&quot;JO&#xC3;O DAM&#xC1;ZIO GOMES&quot;</span>,
        <span class="hljs-string">&quot;number&quot;</span>: <span class="hljs-string">&quot;311&quot;</span>,
        <span class="hljs-string">&quot;neighborhood&quot;</span>: <span class="hljs-string">&quot;S&#xC3;O JOS&#xC9;&quot;</span>,
        <span class="hljs-string">&quot;complement&quot;</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-string">&quot;reference&quot;</span>: <span class="hljs-string">&quot;Bairro Praia Azul / Posto de Sa&#xFA;de 17&quot;</span>,
        <span class="hljs-string">&quot;geoCoordinates&quot;</span>: []
      },
      <span class="hljs-string">&quot;logisticsInfo&quot;</span>: [
        {
          <span class="hljs-string">&quot;itemIndex&quot;</span>: <span class="hljs-number">0</span>,
          <span class="hljs-string">&quot;selectedSla&quot;</span>: <span class="hljs-string">&quot;Normal&quot;</span>,
          <span class="hljs-string">&quot;lockTTL&quot;</span>: <span class="hljs-string">&quot;8d&quot;</span>,
          <span class="hljs-string">&quot;shippingEstimate&quot;</span>: <span class="hljs-string">&quot;7d&quot;</span>,
          <span class="hljs-string">&quot;price&quot;</span>: <span class="hljs-number">1090</span>,
          <span class="hljs-string">&quot;deliveryWindow&quot;</span>: <span class="hljs-literal">null</span>
        }
      ]
    },
    <span class="hljs-string">&quot;paymentData&quot;</span>:{
        <span class="hljs-string">&quot;merchantName&quot;</span>:<span class="hljs-string">&quot;sandboxintegracao&quot;</span> <span class="hljs-comment">//campo recebido na simula&#xE7;&#xE3;o de carrinho</span>
    },
    <span class="hljs-string">&quot;openTextField&quot;</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">&quot;marketingData&quot;</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">&quot;paymentData&quot;</span>:<span class="hljs-literal">null</span>
}
</code></pre>
<p><em>response:</em></p>
<pre><code class="lang-json">{
    <span class="hljs-string">&quot;marketplaceOrderId&quot;</span>: <span class="hljs-string">&quot;959311095&quot;</span>,
    <span class="hljs-string">&quot;orderId&quot;</span>: <span class="hljs-string">&quot;123543123&quot;</span>, <span class="hljs-comment">//id do pedido que foi gerado na loja VTEX</span>
    <span class="hljs-string">&quot;followUpEmail&quot;</span>: <span class="hljs-string">&quot;75c70c09dbb3498c9b3bbdee59bf0687@ct.vtex.com.br&quot;</span>,
    <span class="hljs-string">&quot;items&quot;</span>: [
      {
        <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;2002495&quot;</span>,
        <span class="hljs-string">&quot;quantity&quot;</span>: <span class="hljs-number">1</span>,
        <span class="hljs-string">&quot;seller&quot;</span>: <span class="hljs-string">&quot;1&quot;</span>,
        <span class="hljs-string">&quot;commission&quot;</span>: <span class="hljs-number">0</span>,
        <span class="hljs-string">&quot;freightCommission&quot;</span>: <span class="hljs-number">0</span>,
        <span class="hljs-string">&quot;price&quot;</span>: <span class="hljs-number">9990</span>,
        <span class="hljs-string">&quot;bundleItems&quot;</span>: [],
        <span class="hljs-string">&quot;priceTags&quot;</span>: [],
        <span class="hljs-string">&quot;measurementUnit&quot;</span>: <span class="hljs-string">&quot;un&quot;</span>,
        <span class="hljs-string">&quot;unitMultiplier&quot;</span>: <span class="hljs-number">1</span>,
        <span class="hljs-string">&quot;isGift&quot;</span>: <span class="hljs-literal">false</span>
      }
    ],
    <span class="hljs-string">&quot;clientProfileData&quot;</span>: {
      <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;clientProfileData&quot;</span>,
      <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;5c77abaea35f4cb6824b9326942c00e5@ct.vtex.com.br&quot;</span>,
      <span class="hljs-string">&quot;firstName&quot;</span>: <span class="hljs-string">&quot;JONAS&quot;</span>,
      <span class="hljs-string">&quot;lastName&quot;</span>: <span class="hljs-string">&quot;ALVES DE OLIVEIRA&quot;</span>,
      <span class="hljs-string">&quot;documentType&quot;</span>: <span class="hljs-string">&quot;cpf&quot;</span>,
      <span class="hljs-string">&quot;document&quot;</span>: <span class="hljs-string">&quot;32133239851&quot;</span>,
      <span class="hljs-string">&quot;phone&quot;</span>: <span class="hljs-string">&quot;1592712979&quot;</span>,
      <span class="hljs-string">&quot;corporateName&quot;</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-string">&quot;tradeName&quot;</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-string">&quot;corporateDocument&quot;</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-string">&quot;stateInscription&quot;</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-string">&quot;corporatePhone&quot;</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-string">&quot;isCorporate&quot;</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-string">&quot;userProfileId&quot;</span>: <span class="hljs-literal">null</span>
    },
    <span class="hljs-string">&quot;shippingData&quot;</span>: {
      <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;shippingData&quot;</span>,
      <span class="hljs-string">&quot;address&quot;</span>: {
        <span class="hljs-string">&quot;addressType&quot;</span>: <span class="hljs-string">&quot;Residencial&quot;</span>,
        <span class="hljs-string">&quot;receiverName&quot;</span>: <span class="hljs-string">&quot;JONAS ALVES DE OLIVEIRA&quot;</span>,
        <span class="hljs-string">&quot;addressId&quot;</span>: <span class="hljs-string">&quot;Casa&quot;</span>,
        <span class="hljs-string">&quot;postalCode&quot;</span>: <span class="hljs-string">&quot;13476103&quot;</span>,
        <span class="hljs-string">&quot;city&quot;</span>: <span class="hljs-string">&quot;Americana&quot;</span>,
        <span class="hljs-string">&quot;state&quot;</span>: <span class="hljs-string">&quot;SP&quot;</span>,
        <span class="hljs-string">&quot;country&quot;</span>: <span class="hljs-string">&quot;BRA&quot;</span>,
        <span class="hljs-string">&quot;street&quot;</span>: <span class="hljs-string">&quot;JO&#xC3;O DAM&#xC1;ZIO GOMES&quot;</span>,
        <span class="hljs-string">&quot;number&quot;</span>: <span class="hljs-string">&quot;121&quot;</span>,
        <span class="hljs-string">&quot;neighborhood&quot;</span>: <span class="hljs-string">&quot;S&#xC3;O JOS&#xC9;&quot;</span>,
        <span class="hljs-string">&quot;complement&quot;</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-string">&quot;reference&quot;</span>: <span class="hljs-string">&quot;Bairro Praia Azul / Posto de Sa&#xFA;de 17&quot;</span>,
        <span class="hljs-string">&quot;geoCoordinates&quot;</span>: []
      },
      <span class="hljs-string">&quot;logisticsInfo&quot;</span>: [
        {
          <span class="hljs-string">&quot;itemIndex&quot;</span>: <span class="hljs-number">0</span>,
          <span class="hljs-string">&quot;selectedSla&quot;</span>: <span class="hljs-string">&quot;Normal&quot;</span>,
          <span class="hljs-string">&quot;lockTTL&quot;</span>: <span class="hljs-string">&quot;8d&quot;</span>,
          <span class="hljs-string">&quot;shippingEstimate&quot;</span>: <span class="hljs-string">&quot;5d&quot;</span>,
          <span class="hljs-string">&quot;price&quot;</span>: <span class="hljs-number">1090</span>,
          <span class="hljs-string">&quot;deliveryWindow&quot;</span>: <span class="hljs-literal">null</span>
        }
      ]
    },
    <span class="hljs-string">&quot;paymentData&quot;</span>:{
        <span class="hljs-string">&quot;merchantName&quot;</span>:<span class="hljs-string">&quot;sandboxintegracao&quot;</span>,
        <span class="hljs-string">&quot;merchantPaymentReferenceId&quot;</span>:<span class="hljs-string">&quot;500225&quot;</span> <span class="hljs-comment">//inteiro, id do pagamento, n&#xFA;mero que ser&#xE1; enviado junto com o pagamento para concilia&#xE7;&#xE3;o.</span>
    }
}
</code></pre>
<p><em>retorno de erro:</em></p>
<pre><code class="lang-json">{
    <span class="hljs-string">&quot;error&quot;</span>: {
    <span class="hljs-string">&quot;code&quot;</span>: <span class="hljs-string">&quot;1&quot;</span>,
    <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;O verbo &apos;GET&apos; n&#xE3;o &#xE9; compat&#xED;vel com a rota &apos;/api/fulfillment/pvt/orders&apos;&quot;</span>,
    <span class="hljs-string">&quot;exception&quot;</span>: <span class="hljs-literal">null</span>
    }
}
</code></pre>
<h3 id="enviar-pagamento-iniciar-transa%C3%A7%C3%A3o-enviar-dados-de-pagamento-enviar-dados-de-anti-fraude-e-autoriza%C3%A7%C3%A3o-de-pagamento"><a name="enviar-pagamento-iniciar-transa%C3%A7%C3%A3o-enviar-dados-de-pagamento-enviar-dados-de-anti-fraude-e-autoriza%C3%A7%C3%A3o-de-pagamento" class="plugin-anchor" href="#enviar-pagamento-iniciar-transa%C3%A7%C3%A3o-enviar-dados-de-pagamento-enviar-dados-de-anti-fraude-e-autoriza%C3%A7%C3%A3o-de-pagamento"><span class="fa fa-link"></span></a>Enviar Pagamento - Iniciar Transa&#xE7;&#xE3;o, Enviar Dados de Pagamento, Enviar Dados de Anti-Fraude e Autoriza&#xE7;&#xE3;o de Pagamento</h3>
<p>Ap&#xF3;s enviar o pedido e receber o response com o paymentData.merchantPaymentReferenceId, o processo de transa&#xE7;&#xE3;o de pagamento do pedido dever&#xE1; ser enviado.</p>
<p><a name="a8"></a></p>
<h3 id="iniciar-transa%C3%A7%C3%A3o"><a name="iniciar-transa%C3%A7%C3%A3o" class="plugin-anchor" href="#iniciar-transa%C3%A7%C3%A3o"><span class="fa fa-link"></span></a>Iniciar Transa&#xE7;&#xE3;o</h3>
<p>Inicia uma transa&#xE7;&#xE3;o de pagamento usando o paymentData.merchantPaymentReferenceId recebido no retorno de inser&#xE7;&#xE3;o de pedido - Endpoint Loja VTEX</p>
<p>endpoint: <code>https://[loja].vtexpayments.com.br/api/pvt/transactions</code>
verb: <strong>POST</strong><br>
Content-Type: <strong>application/json</strong><br>
Accept: <strong>application/json</strong><br></p>
<p><em>request:</em></p>
<pre><code class="lang-json">{
  <span class="hljs-string">&quot;value&quot;</span>:<span class="hljs-number">3190</span>, <span class="hljs-comment">//valor do pagamento</span>
  <span class="hljs-string">&quot;referenceId&quot;</span>:<span class="hljs-string">&quot;500225&quot;</span>, <span class="hljs-comment">//paymentData.merchantPaymentReferenceId retornado no momento que inseriu o pedido</span>
  <span class="hljs-string">&quot;channel&quot;</span>:<span class="hljs-string">&quot;sandboxintegracao&quot;</span>, <span class="hljs-comment">//nome do gateway de pagamento</span>
  <span class="hljs-string">&quot;urn&quot;</span>:<span class="hljs-string">&quot;&quot;</span>
}
</code></pre>
<p><em>response:</em></p>
<pre><code class="lang-json">{
    <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;BB55ED929FF749E6BE5A835E4C811B77&quot;</span>,
    <span class="hljs-string">&quot;transactionId&quot;</span>: <span class="hljs-string">&quot;BB55ED929FF749E6BE5A835E4C811B77&quot;</span>, <span class="hljs-comment">// identificador da transa&#xE7;&#xE3;o criada</span>
    <span class="hljs-string">&quot;referenceKey&quot;</span>: <span class="hljs-string">&quot;500225&quot;</span>,
    <span class="hljs-string">&quot;interactions&quot;</span>: {
        <span class="hljs-string">&quot;href&quot;</span>: <span class="hljs-string">&quot;/api/pvt/transactions/BB55ED929FF749E6BE5A835E4C811B77/interactions&quot;</span>
    },
    <span class="hljs-string">&quot;settlements&quot;</span>: {
        <span class="hljs-string">&quot;href&quot;</span>: <span class="hljs-string">&quot;/api/pvt/transactions/BB55ED929FF749E6BE5A835E4C811B77/settlements&quot;</span>
    },
    <span class="hljs-string">&quot;payments&quot;</span>: {
        <span class="hljs-string">&quot;href&quot;</span>: <span class="hljs-string">&quot;/api/pvt/transactions/BB55ED929FF749E6BE5A835E4C811B77/payments&quot;</span>
    },
    <span class="hljs-string">&quot;refunds&quot;</span>: {
        <span class="hljs-string">&quot;href&quot;</span>: <span class="hljs-string">&quot;/api/pvt/transactions/BB55ED929FF749E6BE5A835E4C811B77/refunds&quot;</span>
    },
    <span class="hljs-string">&quot;timeoutStatus&quot;</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">&quot;totalRefunds&quot;</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;Started&quot;</span>,
    <span class="hljs-string">&quot;value&quot;</span>: <span class="hljs-number">3190</span>,
    <span class="hljs-string">&quot;receiverUri&quot;</span>: <span class="hljs-string">&quot;https://sandboxintegracao.vtexpayments.com.br:443/api/pvt/transactions/BB55ED929FF749E6BE5A835E4C811B77/payments/&quot;</span>,
    <span class="hljs-string">&quot;startDate&quot;</span>: <span class="hljs-string">&quot;2015-01-26T18:40:31.4040955Z&quot;</span>,
    <span class="hljs-string">&quot;authorizationToken&quot;</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">&quot;authorizationDate&quot;</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">&quot;commitmentToken&quot;</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">&quot;commitmentDate&quot;</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">&quot;refundingToken&quot;</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">&quot;refundingDate&quot;</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">&quot;cancelationToken&quot;</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">&quot;cancelationDate&quot;</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">&quot;fields&quot;</span>: [
        {
            <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;channel&quot;</span>,
            <span class="hljs-string">&quot;value&quot;</span>: <span class="hljs-string">&quot;sandboxintegracao&quot;</span>
        }
    ],
    <span class="hljs-string">&quot;ipAddress&quot;</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">&quot;userAgent&quot;</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">&quot;acceptHeader&quot;</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">&quot;antifraudTid&quot;</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">&quot;channel&quot;</span>: <span class="hljs-string">&quot;sandboxintegracao&quot;</span>,
    <span class="hljs-string">&quot;urn&quot;</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">&quot;softDescriptor&quot;</span>: <span class="hljs-literal">null</span>
}
</code></pre>
<p><a name="a9"></a></p>
<h3 id="enviar-dados-de-pagamento"><a name="enviar-dados-de-pagamento" class="plugin-anchor" href="#enviar-dados-de-pagamento"><span class="fa fa-link"></span></a>Enviar Dados de Pagamento</h3>
<p>Envia os dados referentes ao pagamento, debaixo da transa&#xE7;&#xE3;o iniciada - Endpoint Loja VTEX</p>
<p>endpoint: <code>https://[loja].vtexpayments.com.br/api/pvt/payments</code>
verb: <strong>POST</strong><br>
Content-Type: <strong>application/json</strong><br>
Accept: <strong>application/json</strong><br></p>
<p><em>request:</em></p>
<pre><code class="lang-json">{
  &quot;callbackUrl&quot;: &quot;&quot;,
  &quot;paymentsArray&quot;: &quot;[
    {
      \&quot;paymentSystem\&quot;: 2, //identificador da forma de pagamento
      \&quot;paymentSystemName\&quot;: \&quot;Visa\&quot;, //nome da forma de pagamento
      \&quot;groupName\&quot;: \&quot;creditCard\&quot;, //grupo da forma de pagamento, tipo
      \&quot;currencyCode\&quot;: \&quot;BRL\&quot;, //c&#xF3;digo da moeda
      \&quot;installments\&quot;: 1, //numero de parcelas
      \&quot;value\&quot;: 3190, //caso sem juros: valor total do pedido; caso parcelado com juros: multiplar o valor das parcelas com juros pelo numero de parcelas
      \&quot;installmentsInterestRate\&quot;: 0, //juros de parcelamento
      \&quot;installmentsValue\&quot;: 3190, //valor da parcela
      \&quot;referenceValue\&quot;: 3190, //valor total do pedidos sem juros
      \&quot;fields\&quot;: {
        \&quot;document\&quot;: \&quot;80417345615\&quot;, //documento do cart&#xE3;o
        \&quot;accountId\&quot;: \&quot;\&quot;,
        \&quot;addressId\&quot;: \&quot;\&quot;,
        \&quot;cardNumber\&quot;: \&quot;4444333322221111\&quot;, //numero do cartao, quando cart&#xE3;o
        \&quot;carHolder\&quot;: \&quot;JONAS ALVES DE OLIVEIRA\&quot;, //nome do cart&#xE3;o, quando cart&#xE3;o
        \&quot;expireDate\&quot;: \&quot;0617\&quot;, //mes, ano da validade do cart&#xE3;o
        \&quot;cvv2\&quot;: \&quot;171\&quot; //codigo de valida&#xE7;&#xE3;o do cart&#xE3;o
      },
      \&quot;transaction\&quot;: {
        \&quot;id\&quot;: \&quot;BB55ED929FF749E6BE5A835E4C811B77\&quot;,//identificador da transa&#xE7;&#xE3;o
        \&quot;merchantName\&quot;: \&quot;sandboxintegracao\&quot;,//mercahnname
        \&quot;payments\&quot;: null
      }
    }
  ]&quot;
}
</code></pre>
<p><em>response:</em></p>
<pre><code class="lang-json"><span class="hljs-number">200</span>
</code></pre>
<p><a name="a10"></a></p>
<h3 id="enviar-dados-adicionais"><a name="enviar-dados-adicionais" class="plugin-anchor" href="#enviar-dados-adicionais"><span class="fa fa-link"></span></a>Enviar Dados Adicionais</h3>
<p>Envia dados adicionais que ser&#xE3;o usados pelo sistema de anti-fraude - Endpoint Loja VTEX</p>
<p>endpoint: <code>https://[loja].vtexpayments.com.br/api/pvt/transactions/[transactionid]/additional-data</code>
verb: <strong>POST</strong><br>
Content-Type: <strong>application/json</strong><br>
Accept: <strong>application/json</strong><br>
Parametro: <strong>transactionid</strong> // identificador da transa&#xE7;&#xE3;o  Ex: BB55ED929FF749E6BE5A835E4C811B77<br></p>
<p><em>request:</em></p>
<pre><code class="lang-json">[
    {
        &quot;name&quot;: &quot;cart&quot;,
        &quot;value&quot;: &quot;{\&quot;items\&quot;:[
        {
                        \&quot;id\&quot;:\&quot;122323\&quot;,
                        \&quot;name\&quot;:\&quot;Tenis Adidas Preto I Tenis Adidas Preto I Tenis Adidas Preto I Tenis Adidas Preto I Tenis Adidas Preto I ABCDEFG\&quot;,
                        \&quot;value\&quot;:1075,
                        \&quot;quantity\&quot;:1,
                        \&quot;shippingDiscount\&quot;:0,
                        \&quot;discount\&quot;:50
        }
        ],\&quot;freight\&quot;:800,
        \&quot;tax\&quot;:0
        }&quot;
    },
    {
        &quot;name&quot;: &quot;clientProfileData&quot;,
        &quot;value&quot;: &quot;{\&quot;email\&quot;:\&quot;ellen.silva@vtex.com.br\&quot;,\&quot;firstName\&quot;:\&quot;Ellen\&quot;,\&quot;lastName\&quot;:\&quot;Silva\&quot;,\&quot;document\&quot;:\&quot;02647420955\&quot;,\&quot;phone\&quot;:\&quot;+551433118100\&quot;,\&quot;corporateName\&quot;:null,\&quot;tradeName\&quot;:null,\&quot;corporateDocument\&quot;:null,\&quot;stateInscription\&quot;:null,\&quot;postalCode\&quot;:\&quot;22011-050\&quot;,\&quot;address\&quot;:{\&quot;receiverName\&quot;:\&quot;Ellen\&quot;,\&quot;postalCode\&quot;:\&quot;22011050\&quot;,\&quot;city\&quot;:\&quot;RIO DE JANEIRO\&quot;,\&quot;state\&quot;:\&quot;RJ\&quot;,\&quot;country\&quot;:\&quot;BRA\&quot;,\&quot;street\&quot;:\&quot;RUA  GENERAL AZEVEDO PIMENTEL\&quot;,\&quot;number\&quot;:\&quot;12345\&quot;,\&quot;neighborhood\&quot;:\&quot;COPACABANA\&quot;,\&quot;complement\&quot;:\&quot;APTO 302\&quot;,\&quot;reference\&quot;:null},\&quot;gender\&quot;:null,\&quot;birthDate\&quot;:null,\&quot;corporatePhone\&quot;:null,\&quot;isCorporate\&quot;:false}&quot;
    },
    {
        &quot;name&quot;: &quot;shippingData&quot;,
        &quot;value&quot;: &quot;{\&quot;receiverName\&quot;:\&quot;ELLEN\&quot;,\&quot;postalCode\&quot;:\&quot;65035430\&quot;,\&quot;city\&quot;:\&quot;SAO LUIS\&quot;,\&quot;state\&quot;:\&quot;MA\&quot;,\&quot;country\&quot;:\&quot;BRA\&quot;,\&quot;street\&quot;:\&quot;AV NEWTON BELLO \&quot;,\&quot;number\&quot;:\&quot;777\&quot;,\&quot;neighborhood\&quot;:\&quot;MONTE CATELO\&quot;,\&quot;complement\&quot;:\&quot;APTO 302\&quot;,\&quot;reference\&quot;:null}&quot;
    }
]
</code></pre>
<p><em>response:</em></p>
<pre><code class="lang-json">

</code></pre>
<p><a name="a11"></a></p>
<h3 id="autoriza%C3%A7%C3%A3o-de-pagamento"><a name="autoriza%C3%A7%C3%A3o-de-pagamento" class="plugin-anchor" href="#autoriza%C3%A7%C3%A3o-de-pagamento"><span class="fa fa-link"></span></a>Autoriza&#xE7;&#xE3;o de Pagamento</h3>
<p>Envia uma autoriza&#xE7;&#xE3;o para libera&#xE7;&#xE3;o  do andamento do processo de pagamento - Endpoint Loja VTEX</p>
<p>endpoint: <code>https://[loja].vtexpayments.com.br/api/pvt/transactions/BB55ED929FF749E6BE5A835E4C811B77/authorization-request</code>
verb: <strong>POST</strong><br>
Content-Type: <strong>application/json</strong><br>
Accept: <strong>application/json</strong><br>
Parametro: <strong>transactionid</strong> // identificador da transa&#xE7;&#xE3;o<br></p>
<p><em>request:</em></p>
<pre><code class="lang-json">{
    <span class="hljs-string">&quot;transactionId&quot;</span>: <span class="hljs-string">&quot;BB55ED929FF749E6BE5A835E4C811B77&quot;</span>,
    <span class="hljs-string">&quot;softDescriptor&quot;</span>: <span class="hljs-string">&quot;sandboxintegracao&quot;</span>,
    <span class="hljs-string">&quot;prepareForRecurrency&quot;</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-string">&quot;split&quot;</span>: [
        {
            <span class="hljs-string">&quot;merchant&quot;</span>: <span class="hljs-string">&quot;sandboxintegracao&quot;</span>,
            <span class="hljs-string">&quot;value&quot;</span>: <span class="hljs-number">3190</span>,
            <span class="hljs-string">&quot;remoteTransactionId&quot;</span>: <span class="hljs-string">&quot;BB55ED929FF749E6BE5A835E4C811B77&quot;</span>
        }
    ]
}
</code></pre>
<p><em>response:</em></p>
<pre><code class="lang-json">

</code></pre>
<h3 id="implementando-marketplace-services-endpoint-actions"><a name="implementando-marketplace-services-endpoint-actions" class="plugin-anchor" href="#implementando-marketplace-services-endpoint-actions"><span class="fa fa-link"></span></a>Implementando Marketplace Services Endpoint Actions</h3>
<p>O MarketplaceServicesEndpoint serve para o Seller VTEX informar ao canal de vendas a nota fiscal e tracking de pedido. O envio de notas fiscais pode ser parcial, obrigando assim ao informador informar al&#xE9;m dos valores da nota fiscal, os items ele est&#xE1; mandando na nota fiscal parcial.</p>
<p><a name="a12"></a></p>
<h3 id="informar-nota-fiscal"><a name="informar-nota-fiscal" class="plugin-anchor" href="#informar-nota-fiscal"><span class="fa fa-link"></span></a>Informar Nota Fiscal</h3>
<p>Quando a Nota Fiscal for emitida pelo Seller VTEX, est&#xE1; ser&#xE1; enviada para o Marketplace no marketplaceServicesEndpoint enviado nos dados de pedido - Endpoint do Marketplace</p>
<p>endpoint: <code>https://marketplaceServicesEndpoint/pub/orders/[marketplaceorderId]/invoice</code>
verb: <strong>POST</strong><br>
Content-Type: <strong>application/json</strong><br>
Accept: <strong>application/json</strong><br></p>
<p><em>request:</em></p>
<pre><code class="lang-json">{
    <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;Output&quot;</span>, <span class="hljs-comment">//Output(venda)|Input(devolu&#xE7;&#xE3;o)</span>
    <span class="hljs-string">&quot;invoiceNumber&quot;</span>: <span class="hljs-string">&quot;NFe-00001&quot;</span>, <span class="hljs-comment">//numero da nota fiscal</span>
    <span class="hljs-string">&quot;courier&quot;</span>: <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-comment">//quando &#xE9; nota fiscal, dados de tracking vem vazio</span>
    <span class="hljs-string">&quot;trackingNumber&quot;</span>: <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-comment">//quando &#xE9; nota fiscal, dados de tracking vem vazio</span>
    <span class="hljs-string">&quot;trackingUrl&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<span class="hljs-comment">//quando &#xE9; nota fiscal, dados de tracking vem vazio</span>
    <span class="hljs-string">&quot;items&quot;</span>: [ <span class="hljs-comment">//itens da nota</span>
      {
        <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;345117&quot;</span>,
        <span class="hljs-string">&quot;quantity&quot;</span>: <span class="hljs-number">1</span>,
        <span class="hljs-string">&quot;price&quot;</span>: <span class="hljs-number">9003</span>
      }
    ],
    <span class="hljs-string">&quot;issuanceDate&quot;</span>: <span class="hljs-string">&quot;2013-11-21T00:00:00&quot;</span>, <span class="hljs-comment">//data da nota</span>
    <span class="hljs-string">&quot;invoiceValue&quot;</span>: <span class="hljs-number">9508</span> <span class="hljs-comment">//valor da nota</span>
}
</code></pre>
<p><em>response:</em></p>
<pre><code class="lang-json">{
    <span class="hljs-string">&quot;date&quot;</span>: <span class="hljs-string">&quot;2014-02-07T15:22:56.7612218-02:00&quot;</span>, <span class="hljs-comment">//data do recibo</span>
    <span class="hljs-string">&quot;orderId&quot;</span>: <span class="hljs-string">&quot;123543123&quot;</span>,
    <span class="hljs-string">&quot;receipt&quot;</span>: <span class="hljs-string">&quot;38e0e47da2934847b489216d208cfd91&quot;</span> <span class="hljs-comment">//protocolo gerado, pode ser nulo</span>
}
</code></pre>
<h5 id="captura-de-pagamento"><a name="captura-de-pagamento" class="plugin-anchor" href="#captura-de-pagamento"><span class="fa fa-link"></span></a>Captura de Pagamento</h5>
<p>No momento em que o Marketplace recebe a nota fiscal, &#xE9; o momento de efetuar a captura do pagamento.</p>
<p>endpoint: <code>https://sandboxintegracao.vtexpayments.com.br/api/pvt/transactions/[transactionId]/settlement-request</code>
verb: <strong>POST</strong><br>
Content-Type: <strong>application/json</strong><br>
Accept: <strong>application/json</strong><br></p>
<p><em>request</em></p>
<pre><code class="lang-json">  {value: <span class="hljs-number">14890</span>} <span class="hljs-comment">//valor que deseja capturar</span>
</code></pre>
<p><em>response</em></p>
<pre><code class="lang-json">

</code></pre>
<p><a name="a13"></a></p>
<h3 id="informar-tracking-de-transportadora"><a name="informar-tracking-de-transportadora" class="plugin-anchor" href="#informar-tracking-de-transportadora"><span class="fa fa-link"></span></a>Informar Tracking de Transportadora</h3>
<p>Quando o pedido for entregue a uma transportadora, as informa&#xE7;&#xF5;es de tracking ser&#xE3;o enviadas para o Marketplace no marketplaceServicesEndpoint enviado nos dados de pedido - Endpoint do Marketplace</p>
<p>endpoint: <code>https://marketplaceServicesEndpoint/pub/orders/[marketplaceorderId]/invoice</code>
verb: <strong>POST</strong><br>
Content-Type: <strong>application/json</strong><br>
Accept: <strong>application/json</strong><br></p>
<p><em>request:</em></p>
<pre><code class="lang-json">{
    &quot;type&quot;: &quot;Output&quot;,
    &quot;invoiceNumber&quot;: &quot;NFe-00001&quot;,
    &quot;courier&quot;: &quot;Correios&quot;, //transportadora
    &quot;trackingNumber&quot;: &quot;SR000987654321&quot;, /tracking number
    &quot;trackingUrl&quot;: &quot;http://traking.correios.com.br/sedex/SR000987654321&quot;, url de tracking
    &quot;items&quot;: [
      {
        &quot;id&quot;: &quot;345117&quot;,
        &quot;quantity&quot;: 1,
        &quot;price&quot;: 9003
      }
    ],
    &quot;issuanceDate&quot;: &quot;2013-11-21T00:00:00&quot;,
    &quot;invoiceValue&quot;: 9508
}
</code></pre>
<p><em>response:</em></p>
<pre><code class="lang-json">{
    <span class="hljs-string">&quot;date&quot;</span>: <span class="hljs-string">&quot;2014-02-07T15:22:56.7612218-02:00&quot;</span>, <span class="hljs-comment">//data do recibo</span>
    <span class="hljs-string">&quot;orderId&quot;</span>: <span class="hljs-string">&quot;123543123&quot;</span>,
    <span class="hljs-string">&quot;receipt&quot;</span>: <span class="hljs-string">&quot;38e0e47da2934847b489216d208cfd91&quot;</span> <span class="hljs-comment">//protocolo gerado, pode ser nulo</span>
}
</code></pre>
<p><a name="a14"></a></p>
<h3 id="enviar-solicita%C3%A7%C3%A3o-de-cancelamento"><a name="enviar-solicita%C3%A7%C3%A3o-de-cancelamento" class="plugin-anchor" href="#enviar-solicita%C3%A7%C3%A3o-de-cancelamento"><span class="fa fa-link"></span></a>Enviar Solicita&#xE7;&#xE3;o de Cancelamento</h3>
<p>Uma solicita&#xE7;&#xE3;o de cancelamento pode ser enviada para o para o Marketplace no marketplaceServicesEndpoint - Endpoint do Marketplace</p>
<p>endpoint: <code>https://marketplaceServicesEndpoint/pvt/orders/[marketplaceorderId]/cancel</code>
verb: <strong>GET</strong><br></p>
<h5 id="cancelamento-de-pagamento"><a name="cancelamento-de-pagamento" class="plugin-anchor" href="#cancelamento-de-pagamento"><span class="fa fa-link"></span></a>Cancelamento de Pagamento</h5>
<p>No momento em que o Marketplace recebe uma solicita&#xE7;&#xE3;o de cancelamento de pedido, &#xE9; o momento de efetuar o cancelamento da transa&#xE7;&#xE3;o de pagamento.</p>
<p>endpoint: <code>https://sandboxintegracao.vtexpayments.com.br/api/pvt/transactions/[transactionId]/cancellation-request</code>
verb: <strong>POST</strong><br>
Content-Type: <strong>application/json</strong><br>
Accept: <strong>application/json</strong><br></p>
<p><em>request</em></p>
<pre><code class="lang-json">  {value: <span class="hljs-number">14890</span>} <span class="hljs-comment">//valor que deseja cancelar, geralmente o total do pedido</span>
</code></pre>
<p><em>response</em></p>
<pre><code class="lang-json">

</code></pre>
<blockquote>
<p>A nota fiscal e o tracking podem ser enviados na mesma chamada, basta preencher todos os dados do POST, cabendo ao receber controlar o fluxo de captura de pagamento.</p>
</blockquote>
<hr>
<p>Autor: <em>Jonas Bolognim</em><br>
Propriedade:<em>VTEX &#xA9;</em><br></p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../../../integracao/marketplace/canal-de-vendas-nao-vtex/index.html" class="navigation navigation-prev " aria-label="Previous page: Marketplace não VTEX"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../../integracao/marketplace/seller-não-vtex/index.html" class="navigation navigation-next " aria-label="Next page: Seller não VTEX"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../../../gitbook/app.js"></script>

    
    <script src="../../../gitbook/plugins/gitbook-plugin-ga/plugin.js"></script>
    

    
    <script src="../../../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2},"ga":{"token":"UA-43760863-11","configuration":"auto"}};
    gitbook.start(config);
});
</script>

        <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-43760863-11', 'auto');ga('send', 'pageview');</script>
<!-- body:end -->
    </body>
    <!-- End of book VTEX Lab Docs -->
</html>
